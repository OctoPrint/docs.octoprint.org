

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Discovery Plugin &mdash; OctoPrint master documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="https://unpkg.com/mermaid@8.4.8/dist/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Error Tracking Plugin" href="errortracking.html" />
    <link rel="prev" title="Backup Plugin" href="backup.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> OctoPrint
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Bundled Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="action_command_notification.html">Action Command Notification support</a></li>
<li class="toctree-l2"><a class="reference internal" href="action_command_prompt.html">Action Command Prompt support</a></li>
<li class="toctree-l2"><a class="reference internal" href="announcements.html">Announcement Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracking.html">Anonymous Usage Tracking Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="appkeys.html">Application Keys Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup.html">Backup Plugin</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Discovery Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#first-steps">First Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-pybonjour">Installing pybonjour</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-plugin">Configuring the plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#further-zeroconf-services">Further ZeroConf Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#announced-services">Announced Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#zeroconf-service-http-tcp">ZeroConf Service <code class="docutils literal notranslate"><span class="pre">_http._tcp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#zeroconf-service-octoprint-tcp">ZeroConf Service <code class="docutils literal notranslate"><span class="pre">_octoprint._tcp</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errortracking.html">Error Tracking Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_check.html">File Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="firmware_check.html">Firmware Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcodeviewer.html">GCode Viewer Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="loginui.html">Login UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="pluginmanager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="softwareupdate.html">Software Update Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtual_printer.html">Virtual Printer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events/index.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Developing Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Internal Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jsclientlib/index.html">JavaScript Client Library</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OctoPrint</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">



  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Bundled Plugins</a> &raquo;</li>
        
      <li>Discovery Plugin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/bundledplugins/discovery.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="discovery-plugin">
<span id="sec-bundledplugins-discovery"></span><h1>Discovery Plugin<a class="headerlink" href="#discovery-plugin" title="Permalink to this headline">¶</a></h1>
<p>The OctoPrint Discovery Plugin comes bundled with OctoPrint (starting with 1.2.0).</p>
<p>It allows discovery of the OctoPrint instances via SSDP/UPNP. If
<a class="reference external" href="https://pypi.python.org/pypi/pybonjour">pybonjour</a> is installed OctoPrint
will additionally support discovery via ZeroConf, also known as Bonjour or Avahi.</p>
<p>The SSDP/UPNP support allows OctoPrint to announce itself to machines on the same
network running Microsoft Windows. You will be able to just double click on the
OctoPrint instance icon in “Networks &gt; Other Devices” in your Windows Explorer,
which will take you directly to the web frontend.</p>
<p>The ZeroConf support allows OctoPrint to announce itself to Safari on macOS
on the same network.</p>
<p>Linux users should install <a class="reference external" href="http://avahi.org">Avahi</a> and can then use one
of the various Avahi browsers (e.g. <code class="docutils literal notranslate"><span class="pre">avahi-browse</span></code> for the command
line) to scan for available instances.</p>
<div class="figure align-center" id="id2">
<span id="fig-bundledplugins-discovery-windowsexplorer"></span><img alt="OctoPrint instances in Windows Explorer" src="../_images/bundledplugins-discovery-windowsexplorer.png" />
<p class="caption"><span class="caption-number">Fig. 15 </span><span class="caption-text">Various discovered OctoPrint instances in Windows Explorer</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="first-steps">
<span id="sec-bundledplugins-discovery-firststeps"></span><h2>First Steps<a class="headerlink" href="#first-steps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing-pybonjour">
<span id="sec-bundledplugins-discovery-firststeps-pybonjour"></span><h3>Installing pybonjour<a class="headerlink" href="#installing-pybonjour" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OctoPi versions 0.12.0 and later already come with pybonjour installed and ready to go,
you don’t need to perform these steps there.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently there are no releases for pybonjour available on the Python Package Index PyPI. The latest pybonjour
release is still available in the <a class="reference external" href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/pybonjour/pybonjour-1.1.1.tar.gz">Google Code Archive</a>.
Since that URL is hilariously long though, a shortened version is provided with <a class="reference external" href="https://goo.gl/SxQZ06">https://goo.gl/SxQZ06</a> and
used in the installation instructions below.</p>
</div>
<p>In order for the Zeroconf discovery to work, the
<a class="reference external" href="https://pypi.python.org/pypi/pybonjour">pybonjour package</a> needs to be available
to the Python installation running OctoPrint.</p>
<p>It can be installed via <code class="docutils literal notranslate"><span class="pre">pip</span></code>. Let’s assume you installed OctoPrint manually
into some folder <code class="docutils literal notranslate"><span class="pre">~/OctoPrint</span></code>. You executed <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> within a
virtualenv in the same folder called <code class="docutils literal notranslate"><span class="pre">venv</span></code>. In order to install <code class="docutils literal notranslate"><span class="pre">pybonjour</span></code>
so it will be available to OctoPrint you’ll need to do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pip</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">goo</span><span class="o">.</span><span class="n">gl</span><span class="o">/</span><span class="n">SxQZ06</span>
</pre></div>
</div>
<p><strong>Linux users:</strong> You’ll need to install an additional dependency for this to work, the
libdnssd compatibility layer for libavahi. On Debian/Ubuntu that can be achieved with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">libavahi</span><span class="o">-</span><span class="n">compat</span><span class="o">-</span><span class="n">libdnssd</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-the-plugin">
<span id="sec-bundledplugins-discovery-configuration"></span><h2>Configuring the plugin<a class="headerlink" href="#configuring-the-plugin" title="Permalink to this headline">¶</a></h2>
<p>The plugin supports the following configuration keys:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">publicPort</span></code>: Public port number OctoPrint is reachable under,
optional, if not set the port OctoPrint itself was started under will be used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pathPrefix</span></code>: Path prefix OctoPrint is running under, optional, if not
set <code class="docutils literal notranslate"><span class="pre">/</span></code> will be used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">useSsl</span></code>: <code class="docutils literal notranslate"><span class="pre">true</span></code> if OctoPrint should be called via HTTPS, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">httpUsername</span></code>: HTTP Basic Auth username OctoPrint is reachable with, optional</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">httpPassword</span></code>: HTTP Basic Auth password OctoPrint is reachable with, optional</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upnpUuid</span></code>: uPNP UUID used for SSDP service announcements, usually you will
not have to touch this, will be autogenerated if not set</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zeroConf</span></code>: A list of additional services to announce via ZeroConf, optional,
see below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: Name of the device model OctoPrint is running on, optional</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: Description of the device model OctoPrint is running on,
optional, used only for SSDP</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">number</span></code>: Model number of the device OctoPrint is running on, optional,
used only for SSDP</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">url</span></code>: URL with further details about the device OctoPrint is running on,
optional, used only for SSDP</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">serial</span></code>: Serial number of the device OctoPrint is running on, optional,
used only for SSDP</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vendor</span></code>: Vendor of the device OctoPrint is running on, optional</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vendorUrl</span></code>: URL with further details about the vendor of the device
OctoPrint is running on, optional, used only for SSDP</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<div class="section" id="further-zeroconf-services">
<span id="sec-bundledplugins-discovery-configuration-furtherzeroconf"></span><h3>Further ZeroConf Services<a class="headerlink" href="#further-zeroconf-services" title="Permalink to this headline">¶</a></h3>
<p>The configuration also allows specifying additional ZeroConf service OctoPrint should
announce itself as. Each entry supports the following fields:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">service</span></code>: The service to announce, this is the only obligatory field</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name to announce, defaults to the OctoPrint instance name if not
supplied</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">port</span></code>: The port to announce, defaults to the OctoPrint was started under if
not supplied</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">txt_record</span></code>: The TXT record to publish with the DNS-SD record, should be a
map of keys and associated values.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example">
<span id="sec-bundledplugins-discovery-configuration-example"></span><h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>The following snippet is a valid configuration example for the discovery plugin in OctoPrint’s
<a class="reference internal" href="../configuration/config_yaml.html#sec-configuration-config-yaml"><span class="std std-ref">config.yaml</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">plugins</span><span class="p">:</span>
  <span class="nt">discovery</span><span class="p">:</span>
    <span class="nt">publicPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
    <span class="nt">useSsl</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">zeroConf</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">service</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">_someservice._tcp</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1234</span>
      <span class="nt">txt_record</span><span class="p">:</span>
        <span class="nt">field1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">value1</span>
        <span class="nt">field2</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">value2</span>
    <span class="nt">model</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Some Model</span>
      <span class="nt">vendor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Some Vendor</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="announced-services">
<span id="sec-bundledplugins-discovery-announcedservices"></span><h2>Announced Services<a class="headerlink" href="#announced-services" title="Permalink to this headline">¶</a></h2>
<div class="section" id="zeroconf-service-http-tcp">
<span id="sec-bundledplugins-discovery-announcedservices-http"></span><h3>ZeroConf Service <code class="docutils literal notranslate"><span class="pre">_http._tcp</span></code><a class="headerlink" href="#zeroconf-service-http-tcp" title="Permalink to this headline">¶</a></h3>
<p>If <a class="reference internal" href="#sec-bundledplugins-discovery-firststeps-pybonjour"><span class="std std-ref">pybonjour</span></a> is
correctly installed, OctoPrint will announce itself on the network via ZeroConf
as service <code class="docutils literal notranslate"><span class="pre">_http._tcp</span></code>, with the TXT record containing the standard fields.</p>
<p>See also <a class="reference external" href="http://www.dns-sd.org/txtrecords.html">this documentation of _http._tcp TXT records</a>
for more information.</p>
</div>
<div class="section" id="zeroconf-service-octoprint-tcp">
<span id="sec-bundledplugins-discovery-announcedservices-octoprint"></span><h3>ZeroConf Service <code class="docutils literal notranslate"><span class="pre">_octoprint._tcp</span></code><a class="headerlink" href="#zeroconf-service-octoprint-tcp" title="Permalink to this headline">¶</a></h3>
<p>If <a class="reference internal" href="#sec-bundledplugins-discovery-firststeps-pybonjour"><span class="std std-ref">pybonjour</span></a> is
correctly installed, OctoPrint will announce itself on the network via ZeroConf
as service <code class="docutils literal notranslate"><span class="pre">_octoprint._tcp</span></code>. The TXT record may contain the following fields:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">path</span></code>: path prefix to actual OctoPrint instance, inherited from <code class="docutils literal notranslate"><span class="pre">_http._tcp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u</span></code>: username if HTTP Basic Auth is used, optional, inherited from <code class="docutils literal notranslate"><span class="pre">_http._tcp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">p</span></code>: password if HTTP Basic Auth is used, optional, inherited from <code class="docutils literal notranslate"><span class="pre">_http._tcp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code>: OctoPrint software version</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">api</span></code>: OctoPrint API version</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model</span></code>: Model of the device that is running OctoPrint, optional</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vendor</span></code>: Vendor of the device that is running OctoPrint, optional</p></li>
</ul>
</div></blockquote>
<p>Clients should construct the full path to the OctoPrint instance from this information
following this scheme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">[</span><span class="n">u</span><span class="p">[:</span><span class="n">p</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">:</span><span class="n">port</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://www.dns-sd.org/txtrecords.html">this documentation of _http._tcp TXT records</a>
for more information.</p>
</div>
</div>
<div class="section" id="source-code">
<span id="sec-bundledplugins-discovery-sourcecode"></span><h2>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>The source of the Discovery plugin is bundled with OctoPrint and can be found in
its source repository under <code class="docutils literal notranslate"><span class="pre">src/octoprint/plugins/discovery</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="errortracking.html" class="btn btn-neutral float-right" title="Error Tracking Plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="backup.html" class="btn btn-neutral float-left" title="Backup Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2013-2020, Gina Häußge

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: master
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="https://docs.octoprint.org/en/1.3.12/bundledplugins/discovery.html">1.3.12</a></dd>
      <dd><a href="https://docs.octoprint.org/en/1.4.2/bundledplugins/discovery.html">1.4.2</a></dd>
      <dd><a href="https://docs.octoprint.org/en/1.5.0rc2/bundledplugins/discovery.html">1.5.0rc2</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="https://docs.octoprint.org/en/master/bundledplugins/discovery.html">master</a></dd>
      <dd><a href="https://docs.octoprint.org/en/maintenance/bundledplugins/discovery.html">maintenance</a></dd>
      <dd><a href="https://docs.octoprint.org/en/devel/bundledplugins/discovery.html">devel</a></dd>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>