

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>octoprint.util &mdash; OctoPrint 1.4.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="https://unpkg.com/mermaid@8.4.8/dist/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="JavaScript Client Library" href="../jsclientlib/index.html" />
    <link rel="prev" title="octoprint.access.users" href="users.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> OctoPrint
          

          
          </a>

          
            
            
              <div class="version">
                1.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bundledplugins/index.html">Bundled Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events/index.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Developing Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Internal Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cli.html">octoprint.cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#module-octoprint.cli.dev">octoprint.cli.dev</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#module-octoprint.cli.plugins">octoprint.cli.plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#module-octoprint.cli.server">octoprint.cli.server</a></li>
<li class="toctree-l2"><a class="reference internal" href="filemanager.html">octoprint.filemanager</a></li>
<li class="toctree-l2"><a class="reference internal" href="filemanager.html#module-octoprint.filemanager.analysis">octoprint.filemanager.analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="filemanager.html#module-octoprint.filemanager.destinations">octoprint.filemanager.destinations</a></li>
<li class="toctree-l2"><a class="reference internal" href="filemanager.html#module-octoprint.filemanager.storage">octoprint.filemanager.storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="filemanager.html#module-octoprint.filemanager.util">octoprint.filemanager.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin.html">octoprint.plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin.html#module-octoprint.plugin.core">octoprint.plugin.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin.html#module-octoprint.plugin.types">octoprint.plugin.types</a></li>
<li class="toctree-l2"><a class="reference internal" href="printer.html">octoprint.printer</a></li>
<li class="toctree-l2"><a class="reference internal" href="printer.html#module-octoprint.printer.profile">octoprint.printer.profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html">octoprint.server</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html#module-octoprint.server.util">octoprint.server.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html#module-octoprint.server.util.flask">octoprint.server.util.flask</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html#module-octoprint.server.util.sockjs">octoprint.server.util.sockjs</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html#module-octoprint.server.util.tornado">octoprint.server.util.tornado</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html">octoprint.settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="slicing.html">octoprint.slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="slicing.html#module-octoprint.slicing.exceptions">octoprint.slicing.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html">octoprint.access.users</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">octoprint.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-octoprint.util.commandline">octoprint.util.commandline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jsclientlib/index.html">JavaScript Client Library</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OctoPrint</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">



  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Internal Modules</a> &raquo;</li>
        
      <li>octoprint.util</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/modules/util.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-octoprint.util">
<span id="octoprint-util"></span><span id="sec-modules-util"></span><h1>octoprint.util<a class="headerlink" href="#module-octoprint.util" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="octoprint.util.CaseInsensitiveSet">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">CaseInsensitiveSet</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.CaseInsensitiveSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic case insensitive set</p>
<p>Any str or unicode values will be stored and compared in lower case. Other value types are left as-is.</p>
</dd></dl>

<dl class="class">
<dt id="octoprint.util.ConnectivityChecker">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">ConnectivityChecker</code><span class="sig-paren">(</span><em>interval</em>, <em>host</em>, <em>port</em>, <em>enabled=True</em>, <em>on_change=None</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.ConnectivityChecker" title="Permalink to this definition">¶</a></dt>
<dd><p>Regularly checks for online connectivity.</p>
<p>Tries to open a connection to the provided <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">port</span></code> every <code class="docutils literal notranslate"><span class="pre">interval</span></code>
seconds and sets the <code class="docutils literal notranslate"><span class="pre">online</span></code> status accordingly.</p>
<dl class="method">
<dt id="octoprint.util.ConnectivityChecker.check_immediately">
<code class="descname">check_immediately</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.ConnectivityChecker.check_immediately" title="Permalink to this definition">¶</a></dt>
<dd><p>Check immediately and return result.</p>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.ConnectivityChecker.enabled">
<code class="descname">enabled</code><a class="headerlink" href="#octoprint.util.ConnectivityChecker.enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the check is enabled or not.</p>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.ConnectivityChecker.host">
<code class="descname">host</code><a class="headerlink" href="#octoprint.util.ConnectivityChecker.host" title="Permalink to this definition">¶</a></dt>
<dd><p>DNS host to query.</p>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.ConnectivityChecker.interval">
<code class="descname">interval</code><a class="headerlink" href="#octoprint.util.ConnectivityChecker.interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Interval between consecutive automatic checks.</p>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.ConnectivityChecker.online">
<code class="descname">online</code><a class="headerlink" href="#octoprint.util.ConnectivityChecker.online" title="Permalink to this definition">¶</a></dt>
<dd><p>Current online status, True if online, False if offline.</p>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.ConnectivityChecker.port">
<code class="descname">port</code><a class="headerlink" href="#octoprint.util.ConnectivityChecker.port" title="Permalink to this definition">¶</a></dt>
<dd><p>DNS port to query.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="octoprint.util.DefaultOrderedDict">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">DefaultOrderedDict</code><span class="sig-paren">(</span><em>default_factory=None</em>, <em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.DefaultOrderedDict" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="octoprint.util.DefaultOrderedDict.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a shallow copy of od<a class="headerlink" href="#octoprint.util.DefaultOrderedDict.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="octoprint.util.PrependableQueue">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">PrependableQueue</code><span class="sig-paren">(</span><em>maxsize=0</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.PrependableQueue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="octoprint.util.RepeatedTimer">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">RepeatedTimer</code><span class="sig-paren">(</span><em>interval</em>, <em>function</em>, <em>args=None</em>, <em>kwargs=None</em>, <em>run_first=False</em>, <em>condition=None</em>, <em>on_condition_false=None</em>, <em>on_cancelled=None</em>, <em>on_finish=None</em>, <em>daemon=True</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.RepeatedTimer" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents an action that should be run repeatedly in an interval. It is similar to python’s
own <code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Timer</span></code> class, but instead of only running once the <code class="docutils literal notranslate"><span class="pre">function</span></code> will be run again and again,
sleeping the stated <code class="docutils literal notranslate"><span class="pre">interval</span></code> in between.</p>
<p>RepeatedTimers are started, as with threads, by calling their <code class="docutils literal notranslate"><span class="pre">start()</span></code> method. The timer can be stopped (in
between runs) by calling the <code class="xref py py-func docutils literal notranslate"><span class="pre">cancel()</span></code> method. The interval the time waited before execution of a loop may
not be exactly the same as the interval specified by the user.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">RepeatedTimer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">hello</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> <span class="c1"># prints &quot;Hello World!&quot; every second</span>
</pre></div>
</div>
<p>Another example with dynamic interval and loop condition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">maximum</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">factor</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">interval</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">count</span>
    <span class="k">global</span> <span class="n">factor</span>
    <span class="k">return</span> <span class="n">count</span> <span class="o">*</span> <span class="n">factor</span>

<span class="k">def</span> <span class="nf">condition</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">count</span>
    <span class="k">global</span> <span class="n">maximum</span>
    <span class="k">return</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="n">maximum</span>

<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

    <span class="k">global</span> <span class="n">count</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">RepeatedTimer</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">hello</span><span class="p">,</span> <span class="n">run_first</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="n">condition</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> <span class="c1"># prints &quot;Hello World!&quot; 5 times, printing the first one</span>
          <span class="c1"># directly, then waiting 1, 2, 3, 4s in between (adaptive interval)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>interval</strong> (<em>float</em><em> or </em><em>callable</em>) – The interval between each <code class="docutils literal notranslate"><span class="pre">function</span></code> call, in seconds. Can also be a callable
returning the interval to use, in case the interval is not static.</li>
<li><strong>function</strong> (<em>callable</em>) – The function to call.</li>
<li><strong>args</strong> (<em>list</em><em> or </em><em>tuple</em>) – The arguments for the <code class="docutils literal notranslate"><span class="pre">function</span></code> call. Defaults to an empty list.</li>
<li><strong>kwargs</strong> (<em>dict</em>) – The keyword arguments for the <code class="docutils literal notranslate"><span class="pre">function</span></code> call. Defaults to an empty dict.</li>
<li><strong>run_first</strong> (<em>boolean</em>) – If set to True, the function will be run for the first time <em>before</em> the first wait period.
If set to False (the default), the function will be run for the first time <em>after</em> the first wait period.</li>
<li><strong>condition</strong> (<em>callable</em>) – Condition that needs to be True for loop to continue. Defaults to <code class="docutils literal notranslate"><span class="pre">lambda:</span> <span class="pre">True</span></code>.</li>
<li><strong>on_condition_false</strong> (<em>callable</em>) – Callback to call when the timer finishes due to condition becoming false. Will
be called before the <code class="docutils literal notranslate"><span class="pre">on_finish</span></code> callback.</li>
<li><strong>on_cancelled</strong> (<em>callable</em>) – Callback to call when the timer finishes due to being cancelled. Will be called
before the <code class="docutils literal notranslate"><span class="pre">on_finish</span></code> callback.</li>
<li><strong>on_finish</strong> (<em>callable</em>) – Callback to call when the timer finishes, either due to being cancelled or since
the condition became false.</li>
<li><strong>daemon</strong> (<em>bool</em>) – daemon flag to set on underlying thread.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="octoprint.util.RepeatedTimer.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.RepeatedTimer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="octoprint.util.ResettableTimer">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">ResettableTimer</code><span class="sig-paren">(</span><em>interval</em>, <em>function</em>, <em>args=None</em>, <em>kwargs=None</em>, <em>on_reset=None</em>, <em>on_cancelled=None</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.ResettableTimer" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents an action that should be run after a specified amount of time. It is similar to python’s
own <code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Timer</span></code> class, with the addition of being able to reset the counter to zero.</p>
<p>ResettableTimers are started, as with threads, by calling their <code class="docutils literal notranslate"><span class="pre">start()</span></code> method. The timer can be stopped (in
between runs) by calling the <code class="xref py py-func docutils literal notranslate"><span class="pre">cancel()</span></code> method. Resetting the counter can be done with the <code class="xref py py-func docutils literal notranslate"><span class="pre">reset()</span></code> method.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ran hello() at </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">ResettableTimers</span><span class="p">(</span><span class="mf">60.0</span><span class="p">,</span> <span class="n">hello</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Started at </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Reset at </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>interval</strong> (<em>float</em><em> or </em><em>callable</em>) – The interval before calling <code class="docutils literal notranslate"><span class="pre">function</span></code>, in seconds. Can also be a callable
returning the interval to use, in case the interval is not static.</li>
<li><strong>function</strong> (<em>callable</em>) – The function to call.</li>
<li><strong>args</strong> (<em>list</em><em> or </em><em>tuple</em>) – The arguments for the <code class="docutils literal notranslate"><span class="pre">function</span></code> call. Defaults to an empty list.</li>
<li><strong>kwargs</strong> (<em>dict</em>) – The keyword arguments for the <code class="docutils literal notranslate"><span class="pre">function</span></code> call. Defaults to an empty dict.</li>
<li><strong>on_cancelled</strong> (<em>callable</em>) – Callback to call when the timer finishes due to being cancelled.</li>
<li><strong>on_reset</strong> (<em>callable</em>) – Callback to call when the timer is reset.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="octoprint.util.ResettableTimer.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.ResettableTimer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="octoprint.util.TypeAlreadyInQueue">
<em class="property">exception </em><code class="descclassname">octoprint.util.</code><code class="descname">TypeAlreadyInQueue</code><span class="sig-paren">(</span><em>t</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.TypeAlreadyInQueue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="octoprint.util.TypedQueue">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">TypedQueue</code><span class="sig-paren">(</span><em>maxsize=0</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.TypedQueue" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="octoprint.util.TypedQueue.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.TypedQueue.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove and return an item from the queue.</p>
<p>If optional args ‘block’ is true and ‘timeout’ is None (the default),
block if necessary until an item is available. If ‘timeout’ is
a non-negative number, it blocks at most ‘timeout’ seconds and raises
the Empty exception if no item was available within that time.
Otherwise (‘block’ is false), return an item if one is immediately
available, else raise the Empty exception (‘timeout’ is ignored
in that case).</p>
</dd></dl>

<dl class="method">
<dt id="octoprint.util.TypedQueue.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>item</em>, <em>item_type=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.TypedQueue.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Put an item into the queue.</p>
<p>If optional args ‘block’ is true and ‘timeout’ is None (the default),
block if necessary until a free slot is available. If ‘timeout’ is
a non-negative number, it blocks at most ‘timeout’ seconds and raises
the Full exception if no free slot was available within that time.
Otherwise (‘block’ is false), put an item on the queue if a free slot
is immediately available, else raise the Full exception (‘timeout’
is ignored in that case).</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="octoprint.util.address_for_client">
<code class="descclassname">octoprint.util.</code><code class="descname">address_for_client</code><span class="sig-paren">(</span><em>host</em>, <em>port</em>, <em>timeout=3.05</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.address_for_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the address of the network interface on this host needed to connect to the indicated client host and port.</p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.chunks">
<code class="descclassname">octoprint.util.</code><code class="descname">chunks</code><span class="sig-paren">(</span><em>l</em>, <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield successive n-sized chunks from l.</p>
<p>Taken from <a class="reference external" href="http://stackoverflow.com/a/312464/2028598">http://stackoverflow.com/a/312464/2028598</a></p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.count">
<code class="descclassname">octoprint.util.</code><code class="descname">count</code><span class="sig-paren">(</span><em>gen</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Used instead of len(generator), which doesn’t work</p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.deprecated">
<code class="descclassname">octoprint.util.</code><code class="descname">deprecated</code><span class="sig-paren">(</span><em>message</em>, <em>stacklevel=1</em>, <em>since=None</em>, <em>includedoc=None</em>, <em>extenddoc=False</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.deprecated" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator for deprecated methods. Logs a deprecation warning via Python’s <cite>:mod:`warnings</cite> module including the
supplied <code class="docutils literal notranslate"><span class="pre">message</span></code>. The call stack level used (for adding the source location of the offending call to the
warning) can be overridden using the optional <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> parameter. If both <code class="docutils literal notranslate"><span class="pre">since</span></code> and <code class="docutils literal notranslate"><span class="pre">includedoc</span></code> are
provided, a deprecation warning will also be added to the function’s docstring by providing or extending its <code class="docutils literal notranslate"><span class="pre">__doc__</span></code>
property.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>message</strong> (<em>string</em>) – The message to include in the deprecation warning.</li>
<li><strong>stacklevel</strong> (<em>int</em>) – Stack level for including the caller of the offending method in the logged warning. Defaults to 1,
meaning the direct caller of the method. It might make sense to increase this in case of the function call
happening dynamically from a fixed position to not shadow the real caller (e.g. in case of overridden
<code class="docutils literal notranslate"><span class="pre">getattr</span></code> methods).</li>
<li><strong>includedoc</strong> (<em>string</em>) – Message about the deprecation to include in the wrapped function’s docstring.</li>
<li><strong>extenddoc</strong> (<em>boolean</em>) – If True the original docstring of the wrapped function will be extended by the deprecation
message, if False (default) it will be replaced with the deprecation message.</li>
<li><strong>since</strong> (<em>string</em>) – Version since when the function was deprecated, must be present for the docstring to get extended.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The wrapped function with the deprecation warnings in place.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">function</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.dict_clean">
<code class="descclassname">octoprint.util.</code><code class="descname">dict_clean</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.dict_clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively deep-sanitizes <code class="docutils literal notranslate"><span class="pre">a</span></code> based on <code class="docutils literal notranslate"><span class="pre">b</span></code>, removing all keys (and
associated values) from <code class="docutils literal notranslate"><span class="pre">a</span></code> that do not appear in <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_sanitize</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_clean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
<span class="go">True</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>dict</em>) – The dictionary to clean against <code class="docutils literal notranslate"><span class="pre">b</span></code>.</li>
<li><strong>b</strong> (<em>dict</em>) – The dictionary containing the key structure to clean from <code class="docutils literal notranslate"><span class="pre">a</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Results:</dt>
<dd>dict: A new dict based on <code class="docutils literal notranslate"><span class="pre">a</span></code> with all keys (and corresponding values) found in <code class="docutils literal notranslate"><span class="pre">b</span></code> removed.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.dict_contains_keys">
<code class="descclassname">octoprint.util.</code><code class="descname">dict_contains_keys</code><span class="sig-paren">(</span><em>keys</em>, <em>dictionary</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.dict_contains_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively deep-checks if <code class="docutils literal notranslate"><span class="pre">dictionary</span></code> contains all keys found in <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">positive</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;some_other_bar&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">negative</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;some_other_bar&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">20</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dictionary</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_contains_keys</span><span class="p">(</span><span class="n">positive</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_contains_keys</span><span class="p">(</span><span class="n">negative</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>dict</em>) – The dictionary to check for the keys from <code class="docutils literal notranslate"><span class="pre">b</span></code>.</li>
<li><strong>b</strong> (<em>dict</em>) – The dictionary whose keys to check <code class="docutils literal notranslate"><span class="pre">a</span></code> for.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if all keys found in <code class="docutils literal notranslate"><span class="pre">b</span></code> are also present in <code class="docutils literal notranslate"><span class="pre">a</span></code>, False otherwise.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.dict_filter">
<code class="descclassname">octoprint.util.</code><code class="descname">dict_filter</code><span class="sig-paren">(</span><em>dictionary</em>, <em>filter_function</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.dict_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters a dictionary with the provided filter_function</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key1</span><span class="o">=</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="n">key2</span><span class="o">=</span><span class="s2">&quot;value2&quot;</span><span class="p">,</span> <span class="n">other_key</span><span class="o">=</span><span class="s2">&quot;other_value&quot;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key1</span><span class="o">=</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="n">key2</span><span class="o">=</span><span class="s2">&quot;value2&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key1</span><span class="o">=</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="n">key2</span><span class="o">=</span><span class="s2">&quot;value2&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">data</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="kc">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">AssertionError</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">AssertionError</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dictionary</strong> (<em>dict</em>) – The dictionary to filter</li>
<li><strong>filter_function</strong> (<em>callable</em>) – The filter function to apply, called with key and
value of an entry in the dictionary, must return <code class="docutils literal notranslate"><span class="pre">True</span></code> for values to
keep and <code class="docutils literal notranslate"><span class="pre">False</span></code> for values to strip</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A shallow copy of the provided dictionary, stripped of the key-value-pairs</dt>
<dd><p class="first last">for which the <code class="docutils literal notranslate"><span class="pre">filter_function</span></code> returned <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.dict_merge">
<code class="descclassname">octoprint.util.</code><code class="descname">dict_merge</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>leaf_merger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.dict_merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively deep-merges two dictionaries.</p>
<p>Taken from <a class="reference external" href="https://www.xormedia.com/recursively-merge-dictionaries-in-python/">https://www.xormedia.com/recursively-merge-dictionaries-in-python/</a></p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;other foo&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;other foo&quot;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_merge</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">b</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_merge</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">leaf_merger</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">dict_merge</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">l1</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">l2</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">l1</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">l2</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">),</span> <span class="n">leaf_merger</span><span class="o">=</span><span class="n">leaf_merger</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;l1&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;l2&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;b&quot;</span>
<span class="go">True</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>dict</em>) – The dictionary to merge <code class="docutils literal notranslate"><span class="pre">b</span></code> into</li>
<li><strong>b</strong> (<em>dict</em>) – The dictionary to merge into <code class="docutils literal notranslate"><span class="pre">a</span></code></li>
<li><strong>leaf_merger</strong> (<em>callable</em>) – An optional callable to use to merge leaves (non-dict values)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">b</span></code> deep-merged into <code class="docutils literal notranslate"><span class="pre">a</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.dict_minimal_mergediff">
<code class="descclassname">octoprint.util.</code><code class="descname">dict_minimal_mergediff</code><span class="sig-paren">(</span><em>source</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.dict_minimal_mergediff" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively calculates the minimal dict that would be needed to be deep merged with
a in order to produce the same result as deep merging a and b.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">bar</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">fnord</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">dict_minimal_mergediff</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">fnord</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="n">dict_merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>source</strong> (<em>dict</em>) – Source dictionary</li>
<li><strong>target</strong> (<em>dict</em>) – Dictionary to compare to source dictionary and derive diff for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>The minimal dictionary to deep merge on <code class="docutils literal notranslate"><span class="pre">source</span></code> to get the same result</dt>
<dd><p class="first last">as deep merging <code class="docutils literal notranslate"><span class="pre">target</span></code> on <code class="docutils literal notranslate"><span class="pre">source</span></code>.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.dict_sanitize">
<code class="descclassname">octoprint.util.</code><code class="descname">dict_sanitize</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.dict_sanitize" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively deep-sanitizes <code class="docutils literal notranslate"><span class="pre">a</span></code> based on <code class="docutils literal notranslate"><span class="pre">b</span></code>, removing all keys (and
associated values) from <code class="docutils literal notranslate"><span class="pre">a</span></code> that do not appear in <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">fnord</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_sanitize</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_clean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
<span class="go">True</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>dict</em>) – The dictionary to clean against <code class="docutils literal notranslate"><span class="pre">b</span></code>.</li>
<li><strong>b</strong> (<em>dict</em>) – The dictionary containing the key structure to clean from <code class="docutils literal notranslate"><span class="pre">a</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Results:</dt>
<dd>dict: A new dict based on <code class="docutils literal notranslate"><span class="pre">a</span></code> with all keys (and corresponding values) found in <code class="docutils literal notranslate"><span class="pre">b</span></code> removed.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="octoprint.util.fallback_dict">
<em class="property">class </em><code class="descclassname">octoprint.util.</code><code class="descname">fallback_dict</code><span class="sig-paren">(</span><em>custom</em>, <em>*fallbacks</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.fallback_dict" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="octoprint.util.fallback_dict.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a set-like object providing a view on D's items<a class="headerlink" href="#octoprint.util.fallback_dict.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="octoprint.util.fallback_dict.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a set-like object providing a view on D's keys<a class="headerlink" href="#octoprint.util.fallback_dict.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="octoprint.util.fallback_dict.values">
<code class="descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; an object providing a view on D's values<a class="headerlink" href="#octoprint.util.fallback_dict.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="octoprint.util.filter_non_ascii">
<code class="descclassname">octoprint.util.</code><code class="descname">filter_non_ascii</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.filter_non_ascii" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter predicate to test if a line contains non ASCII characters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line</strong> (<em>string</em>) – The line to test</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if the line contains non ASCII characters, False otherwise.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.find_collision_free_name">
<code class="descclassname">octoprint.util.</code><code class="descname">find_collision_free_name</code><span class="sig-paren">(</span><em>filename</em>, <em>extension</em>, <em>existing_filenames</em>, <em>max_power=2</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.find_collision_free_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to find a collision free translation of “&lt;filename&gt;.&lt;extension&gt;” to the 8.3 DOS compatible format,
preventing collisions with any of the <code class="docutils literal notranslate"><span class="pre">existing_filenames</span></code>.</p>
<p>First strips all of <code class="docutils literal notranslate"><span class="pre">.&quot;/\[]:;=,</span></code> from the filename and extensions, converts them to lower case and truncates
the <code class="docutils literal notranslate"><span class="pre">extension</span></code> to a maximum length of 3 characters.</p>
<p>If the filename is already equal or less than 8 characters in length after that procedure and “&lt;filename&gt;.&lt;extension&gt;”
are not contained in the <code class="docutils literal notranslate"><span class="pre">existing_files</span></code>, that concatenation will be returned as the result.</p>
<p>If not, the following algorithm will be applied to try to find a collision free name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">counter</span> <span class="o">:=</span> <span class="n">power</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">^</span><span class="n">max_power</span><span class="p">:</span>
    <span class="nb">set</span> <span class="n">truncated</span> <span class="o">:=</span> <span class="n">substr</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">power</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;~&quot;</span> <span class="o">+</span> <span class="n">counter</span>
    <span class="nb">set</span> <span class="n">result</span> <span class="o">:=</span> <span class="s2">&quot;&lt;truncated&gt;.&lt;extension&gt;&quot;</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="n">collision</span> <span class="n">free</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="n">counter</span><span class="o">++</span>
    <span class="k">if</span> <span class="n">counter</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">power</span><span class="p">:</span>
        <span class="n">power</span><span class="o">++</span>
<span class="k">raise</span> <span class="ne">ValueError</span>
</pre></div>
</div>
<p>This will basically – for a given original filename of <code class="docutils literal notranslate"><span class="pre">some_filename</span></code> and an extension of <code class="docutils literal notranslate"><span class="pre">gco</span></code> – iterate
through names of the format <code class="docutils literal notranslate"><span class="pre">some_f~1.gco</span></code>, <code class="docutils literal notranslate"><span class="pre">some_f~2.gco</span></code>, …, <code class="docutils literal notranslate"><span class="pre">some_~10.gco</span></code>, <code class="docutils literal notranslate"><span class="pre">some_~11.gco</span></code>, …,
<code class="docutils literal notranslate"><span class="pre">&lt;prefix&gt;~&lt;n&gt;.gco</span></code> for <code class="docutils literal notranslate"><span class="pre">n</span></code> less than 10 ^ <code class="docutils literal notranslate"><span class="pre">max_power</span></code>, returning as soon as one is found that is not colliding.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>string</em>) – The filename without the extension to convert to 8.3.</li>
<li><strong>extension</strong> (<em>string</em>) – The extension to convert to 8.3 – will be truncated to 3 characters if it’s longer than
that.</li>
<li><strong>existing_filenames</strong> (<em>list</em>) – A list of existing filenames to prevent name collisions with.</li>
<li><strong>max_power</strong> (<em>int</em>) – Limits the possible attempts of generating a collision free name to 10 ^ <code class="docutils literal notranslate"><span class="pre">max_power</span></code>
variations. Defaults to 2, so the name generation will maximally reach <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;~99.&lt;ext&gt;</span></code> before
aborting and raising an exception.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A 8.3 representation of the provided original filename, ensured to not collide with the provided</dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">existing_filenames</span></code></p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">string</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> – No collision free name could be found.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test1234&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1234.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test1234&quot;</span><span class="p">,</span> <span class="s2">&quot;gcode&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1234.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test12345&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test12~1.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test 123&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test_123.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test1234&quot;</span><span class="p">,</span> <span class="s2">&quot;g o&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1234.g_o&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test12345&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;/test12~1.gco&quot;</span><span class="p">])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test12~2.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">many_files</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;/test12~</span><span class="si">{}</span><span class="s2">.gco&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test12345&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="n">many_files</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1~10.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">many_more_files</span> <span class="o">=</span> <span class="n">many_files</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;/test1~</span><span class="si">{}</span><span class="s2">.gco&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test12345&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="n">many_more_files</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1~99.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">many_more_files_plus_one</span> <span class="o">=</span> <span class="n">many_more_files</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;/test1~99.gco&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test12345&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="n">many_more_files_plus_one</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Can&#39;t create a collision free filename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_collision_free_name</span><span class="p">(</span><span class="s2">&quot;test12345&quot;</span><span class="p">,</span> <span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="n">many_more_files_plus_one</span><span class="p">,</span> <span class="n">max_power</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test~100.gco&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_class">
<code class="descclassname">octoprint.util.</code><code class="descname">get_class</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the class object for a given fully qualified class name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>string</em>) – The fully qualified class name, including all modules separated by <code class="docutils literal notranslate"><span class="pre">.</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The class if it could be found.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">type</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_dos_filename">
<code class="descclassname">octoprint.util.</code><code class="descname">get_dos_filename</code><span class="sig-paren">(</span><em>input</em>, <em>existing_filenames=None</em>, <em>extension=None</em>, <em>whitelisted_extensions=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_dos_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the provided input filename to a 8.3 DOS compatible filename. If <code class="docutils literal notranslate"><span class="pre">existing_filenames</span></code> is provided, the
conversion result will be guaranteed not to collide with any of the filenames provided thus.</p>
<p>Uses <a class="reference internal" href="#octoprint.util.find_collision_free_name" title="octoprint.util.find_collision_free_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_collision_free_name()</span></code></a> internally.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>input</strong> (<em>string</em>) – The original filename incl. extension to convert to the 8.3 format.</li>
<li><strong>existing_filenames</strong> (<em>list</em>) – A list of existing filenames with which the generated 8.3 name must not collide.
Optional.</li>
<li><strong>extension</strong> (<em>string</em>) – The .3 file extension to use for the generated filename. If not provided, the extension of
the provided <code class="docutils literal notranslate"><span class="pre">filename</span></code> will simply be truncated to 3 characters.</li>
<li><strong>whitelisted_extensions</strong> (<em>list</em>) – A list of extensions on <code class="docutils literal notranslate"><span class="pre">input</span></code> that will be left as-is instead of
exchanging for <code class="docutils literal notranslate"><span class="pre">extension</span></code>.</li>
<li><strong>kwargs</strong> (<em>dict</em>) – Additional keyword arguments to provide to <a class="reference internal" href="#octoprint.util.find_collision_free_name" title="octoprint.util.find_collision_free_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_collision_free_name()</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A 8.3 compatible translation of the original filename, not colliding with the optionally provided</dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">existing_filenames</span></code> and with the provided <code class="docutils literal notranslate"><span class="pre">extension</span></code> or the original extension shortened to
a maximum of 3 characters.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">string</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> – No 8.3 compatible name could be found that doesn’t collide with the provided <code class="docutils literal notranslate"><span class="pre">existing_filenames</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="s2">&quot;test1234.gco&quot;</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1234.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="s2">&quot;test1234.gcode&quot;</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1234.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="s2">&quot;test12345.gco&quot;</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test12~1.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="s2">&quot;test1234.fnord&quot;</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;gco&quot;</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;test1234.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="s2">&quot;auto0.g&quot;</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;gco&quot;</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;auto0.gco&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="s2">&quot;auto0.g&quot;</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;gco&quot;</span><span class="p">,</span> <span class="n">whitelisted_extensions</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;g&quot;</span><span class="p">])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;auto0.g&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dos_filename</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;foo&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_exception_string">
<code class="descclassname">octoprint.util.</code><code class="descname">get_exception_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_exception_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the exception info of the last raised exception and returns it as a string formatted as
<code class="docutils literal notranslate"><span class="pre">&lt;exception</span> <span class="pre">type&gt;:</span> <span class="pre">&lt;exception</span> <span class="pre">message&gt;</span> <span class="pre">&#64;</span> <span class="pre">&lt;source</span> <span class="pre">file&gt;:&lt;function</span> <span class="pre">name&gt;:&lt;line</span> <span class="pre">number&gt;</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The formatted exception information.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_formatted_datetime">
<code class="descclassname">octoprint.util.</code><code class="descname">get_formatted_datetime</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_formatted_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a datetime instance as “YYYY-mm-dd HH:MM” and returns the resulting string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>d</strong> (<em>datetime.datetime</em>) – The datetime instance to format</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The datetime formatted as “YYYY-mm-dd HH:MM”</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_formatted_size">
<code class="descclassname">octoprint.util.</code><code class="descname">get_formatted_size</code><span class="sig-paren">(</span><em>num</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_formatted_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the given byte count as a human readable rounded size expressed in the most pressing unit among B(ytes),
K(ilo)B(ytes), M(ega)B(ytes), G(iga)B(ytes) and T(era)B(ytes), with one decimal place.</p>
<p>Based on <a class="reference external" href="http://stackoverflow.com/a/1094933/2028598">http://stackoverflow.com/a/1094933/2028598</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>num</strong> (<em>int</em>) – The byte count to format</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The formatted byte count.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_formatted_timedelta">
<code class="descclassname">octoprint.util.</code><code class="descname">get_formatted_timedelta</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_formatted_timedelta" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a timedelta instance as “HH:MM:ss” and returns the resulting string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>d</strong> (<em>datetime.timedelta</em>) – The timedelta instance to format</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The timedelta formatted as “HH:MM:ss”</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_free_bytes">
<code class="descclassname">octoprint.util.</code><code class="descname">get_free_bytes</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_free_bytes" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified">Deprecated since version 1.2.5: </span>Replaced by <a class="reference external" href="http://pythonhosted.org/psutil/#psutil.disk_usage">psutil.disk_usage</a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.get_fully_qualified_classname">
<code class="descclassname">octoprint.util.</code><code class="descname">get_fully_qualified_classname</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.get_fully_qualified_classname" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fully qualified class name for an object.</p>
<p>Based on <a class="reference external" href="https://stackoverflow.com/a/2020083">https://stackoverflow.com/a/2020083</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>o</strong> – the object of which to determine the fqcn</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(str) the fqcn of the object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.interface_addresses">
<code class="descclassname">octoprint.util.</code><code class="descname">interface_addresses</code><span class="sig-paren">(</span><em>family=None</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.interface_addresses" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves all of the host’s network interface addresses.</p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.is_allowed_file">
<code class="descclassname">octoprint.util.</code><code class="descname">is_allowed_file</code><span class="sig-paren">(</span><em>filename</em>, <em>extensions</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.is_allowed_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if the provided <code class="docutils literal notranslate"><span class="pre">filename</span></code> has one of the supplied <code class="docutils literal notranslate"><span class="pre">extensions</span></code>. The check is done case-insensitive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>string</em>) – The file name to check against the extensions.</li>
<li><strong>extensions</strong> (<em>list</em>) – The extensions to check against, a list of strings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if the file name’s extension matches one of the allowed extensions, False otherwise.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.pending_deprecation">
<code class="descclassname">octoprint.util.</code><code class="descname">pending_deprecation</code><span class="sig-paren">(</span><em>message</em>, <em>stacklevel=1</em>, <em>since=None</em>, <em>includedoc=None</em>, <em>extenddoc=False</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.pending_deprecation" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator for methods pending deprecation. Logs a pending deprecation warning via Python’s <cite>:mod:`warnings</cite> module
including the supplied <code class="docutils literal notranslate"><span class="pre">message</span></code>. The call stack level used (for adding the source location of the offending call to
the warning) can be overridden using the optional <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> parameter. If both <code class="docutils literal notranslate"><span class="pre">since</span></code> and <code class="docutils literal notranslate"><span class="pre">includedoc</span></code> are
provided, a deprecation warning will also be added to the function’s docstring by providing or extending its <code class="docutils literal notranslate"><span class="pre">__doc__</span></code>
property.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>message</strong> (<em>string</em>) – The message to include in the deprecation warning.</li>
<li><strong>stacklevel</strong> (<em>int</em>) – Stack level for including the caller of the offending method in the logged warning. Defaults to 1,
meaning the direct caller of the method. It might make sense to increase this in case of the function call
happening dynamically from a fixed position to not shadow the real caller (e.g. in case of overridden
<code class="docutils literal notranslate"><span class="pre">getattr</span></code> methods).</li>
<li><strong>extenddoc</strong> (<em>boolean</em>) – If True the original docstring of the wrapped function will be extended by the deprecation
message, if False (default) it will be replaced with the deprecation message.</li>
<li><strong>includedoc</strong> (<em>string</em>) – Message about the deprecation to include in the wrapped function’s docstring.</li>
<li><strong>since</strong> (<em>string</em>) – Version since when the function was deprecated, must be present for the docstring to get extended.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The wrapped function with the deprecation warnings in place.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">function</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.pp">
<code class="descclassname">octoprint.util.</code><code class="descname">pp</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.pp" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="nb">dict</span><span class="p">())</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;dict()&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;dict(a=1, b=2, c=3)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="nb">set</span><span class="p">())</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&#39;set()&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">})</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&quot;{&#39;a&#39;, &#39;b&#39;}&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&quot;[&#39;a&#39;, &#39;b&#39;, &#39;d&#39;, &#39;c&#39;]&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">((</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">))</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&quot;(&#39;a&#39;, &#39;b&#39;, &#39;d&#39;, &#39;c&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&quot;&#39;foo&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">([</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">},</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">])</span> <span class="c1"># doctest: +ALLOW_UNICODE</span>
<span class="go">&quot;[dict(a=1, b=2), {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;}, (1, 2), None, 1, True, &#39;foo&#39;]&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.server_reachable">
<code class="descclassname">octoprint.util.</code><code class="descname">server_reachable</code><span class="sig-paren">(</span><em>host</em>, <em>port</em>, <em>timeout=3.05</em>, <em>proto='tcp'</em>, <em>source=None</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.server_reachable" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a server is reachable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>host</strong> (<em>str</em>) – host to check against</li>
<li><strong>port</strong> (<em>int</em>) – port to check against</li>
<li><strong>timeout</strong> (<em>float</em>) – timeout for check</li>
<li><strong>proto</strong> (<em>str</em>) – <code class="docutils literal notranslate"><span class="pre">tcp</span></code> or <code class="docutils literal notranslate"><span class="pre">udp</span></code></li>
<li><strong>source</strong> (<em>str</em>) – optional, socket used for check will be bound against this address if provided</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if a connection to the server could be opened, False otherwise</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.silent_remove">
<code class="descclassname">octoprint.util.</code><code class="descname">silent_remove</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.silent_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Silently removes a file. Does not raise an error if the file doesn’t exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file</strong> (<em>string</em>) – The path of the file to be removed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.to_bytes">
<code class="descclassname">octoprint.util.</code><code class="descname">to_bytes</code><span class="sig-paren">(</span><em>s_or_u</em>, <em>encoding='utf-8'</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.to_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure <code class="docutils literal notranslate"><span class="pre">s_or_u</span></code> is a bytestring.</p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.to_native_str">
<code class="descclassname">octoprint.util.</code><code class="descname">to_native_str</code><span class="sig-paren">(</span><em>s_or_u</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.to_native_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure <code class="docutils literal notranslate"><span class="pre">s_or_u</span></code> is a ‘str’.</p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.to_str">
<code class="descclassname">octoprint.util.</code><code class="descname">to_str</code><span class="sig-paren">(</span><em>s_or_u</em>, <em>encoding='utf-8'</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.to_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure <code class="docutils literal notranslate"><span class="pre">s_or_u</span></code> is a bytestring.</p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.to_unicode">
<code class="descclassname">octoprint.util.</code><code class="descname">to_unicode</code><span class="sig-paren">(</span><em>s_or_u</em>, <em>encoding='utf-8'</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.to_unicode" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure <code class="docutils literal notranslate"><span class="pre">s_or_u</span></code> is a unicode string.</p>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.variable_deprecated">
<code class="descclassname">octoprint.util.</code><code class="descname">variable_deprecated</code><span class="sig-paren">(</span><em>message</em>, <em>stacklevel=1</em>, <em>since=None</em>, <em>includedoc=None</em>, <em>extenddoc=False</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.variable_deprecated" title="Permalink to this definition">¶</a></dt>
<dd><p>A function for deprecated variables. Logs a deprecation warning via Python’s <cite>:mod:`warnings</cite> module including the
supplied <code class="docutils literal notranslate"><span class="pre">message</span></code>. The call stack level used (for adding the source location of the offending call to the
warning) can be overridden using the optional <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>message</strong> (<em>string</em>) – The message to include in the deprecation warning.</li>
<li><strong>stacklevel</strong> (<em>int</em>) – Stack level for including the caller of the offending method in the logged warning. Defaults to 1,
meaning the direct caller of the method. It might make sense to increase this in case of the function call
happening dynamically from a fixed position to not shadow the real caller (e.g. in case of overridden
<code class="docutils literal notranslate"><span class="pre">getattr</span></code> methods).</li>
<li><strong>since</strong> (<em>string</em>) – Version since when the function was deprecated, must be present for the docstring to get extended.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The value of the variable with the deprecation warnings in place.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="octoprint.util.variable_pending_deprecation">
<code class="descclassname">octoprint.util.</code><code class="descname">variable_pending_deprecation</code><span class="sig-paren">(</span><em>message</em>, <em>stacklevel=1</em>, <em>since=None</em>, <em>includedoc=None</em>, <em>extenddoc=False</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.variable_pending_deprecation" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator for variables pending deprecation. Logs a pending deprecation warning via Python’s <cite>:mod:`warnings</cite> module
including the supplied <code class="docutils literal notranslate"><span class="pre">message</span></code>. The call stack level used (for adding the source location of the offending call to
the warning) can be overridden using the optional <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>message</strong> (<em>string</em>) – The message to include in the deprecation warning.</li>
<li><strong>stacklevel</strong> (<em>int</em>) – Stack level for including the caller of the offending method in the logged warning. Defaults to 1,
meaning the direct caller of the method. It might make sense to increase this in case of the function call
happening dynamically from a fixed position to not shadow the real caller (e.g. in case of overridden
<code class="docutils literal notranslate"><span class="pre">getattr</span></code> methods).</li>
<li><strong>since</strong> (<em>string</em>) – Version since when the function was deprecated, must be present for the docstring to get extended.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The value of the variable with the deprecation warnings in place.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-octoprint.util.commandline">
<span id="octoprint-util-commandline"></span><span id="sec-modules-util-commandline"></span><h1>octoprint.util.commandline<a class="headerlink" href="#module-octoprint.util.commandline" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="octoprint.util.commandline.CommandlineCaller">
<em class="property">class </em><code class="descclassname">octoprint.util.commandline.</code><code class="descname">CommandlineCaller</code><a class="headerlink" href="#octoprint.util.commandline.CommandlineCaller" title="Permalink to this definition">¶</a></dt>
<dd><p>The CommandlineCaller is a utility class that allows running command line commands while logging their stdout
and stderr via configurable callback functions.</p>
<p>Callbacks are expected to have a signature matching</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="o">*</span><span class="n">lines</span><span class="p">):</span>
    <span class="n">do_something_with_the_passed_lines</span><span class="p">()</span>
</pre></div>
</div>
<p>The class utilizes sarge underneath.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">octoprint.util.commandline</span> <span class="kn">import</span> <span class="n">CommandLineCaller</span><span class="p">,</span> <span class="n">CommandLineError</span>

<span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="o">*</span><span class="n">lines</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">log_stdout</span><span class="p">(</span><span class="o">*</span><span class="n">lines</span><span class="p">):</span>
    <span class="n">log</span><span class="p">(</span><span class="s2">&quot;&gt;&gt;&gt;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">lines</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">log_stderr</span><span class="p">(</span><span class="o">*</span><span class="n">lines</span><span class="p">):</span>
    <span class="n">log</span><span class="p">(</span><span class="s2">&quot;!!!&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">lines</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">log_call</span><span class="p">(</span><span class="o">*</span><span class="n">lines</span><span class="p">)</span>
    <span class="n">log</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">lines</span><span class="p">)</span>

<span class="n">caller</span> <span class="o">=</span> <span class="n">CommandLineCaller</span><span class="p">()</span>
<span class="n">caller</span><span class="o">.</span><span class="n">on_log_call</span> <span class="o">=</span> <span class="n">log_call</span>
<span class="n">caller</span><span class="o">.</span><span class="n">on_log_stdout</span> <span class="o">=</span> <span class="n">log_stdout</span>
<span class="n">caller</span><span class="o">.</span><span class="n">on_log_stderr</span> <span class="o">=</span> <span class="n">log_stderr</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">caller</span><span class="o">.</span><span class="n">checked_call</span><span class="p">([</span><span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;with&quot;</span><span class="p">,</span> <span class="s2">&quot;parameters&quot;</span><span class="p">])</span>
<span class="k">except</span> <span class="n">CommandLineError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Command returned </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">returncode</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Command finished successfully&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="octoprint.util.commandline.CommandlineCaller.call">
<code class="descname">call</code><span class="sig-paren">(</span><em>command</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.commandline.CommandlineCaller.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls a command</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>command</strong> (<em>list</em><em>, </em><em>tuple</em><em> or </em><em>str</em>) – command to call</li>
<li><strong>kwargs</strong> (<em>dict</em>) – additional keyword arguments to pass to the sarge <code class="docutils literal notranslate"><span class="pre">run</span></code> call (note that <code class="docutils literal notranslate"><span class="pre">_async</span></code>,
<code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> will be overwritten)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(tuple) a 3-tuple of return code, full stdout and full stderr output</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="octoprint.util.commandline.CommandlineCaller.checked_call">
<code class="descname">checked_call</code><span class="sig-paren">(</span><em>command</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.commandline.CommandlineCaller.checked_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls a command and raises an error if it doesn’t return with return code 0</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>command</strong> (<em>list</em><em>, </em><em>tuple</em><em> or </em><em>str</em>) – command to call</li>
<li><strong>kwargs</strong> (<em>dict</em>) – additional keyword arguments to pass to the sarge <code class="docutils literal notranslate"><span class="pre">run</span></code> call (note that <code class="docutils literal notranslate"><span class="pre">_async</span></code>,
<code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> will be overwritten)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(tuple) a 3-tuple of return code, full stdout and full stderr output</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#octoprint.util.commandline.CommandlineError" title="octoprint.util.commandline.CommandlineError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CommandlineError</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.commandline.CommandlineCaller.on_log_call">
<code class="descname">on_log_call</code><em class="property"> = None</em><a class="headerlink" href="#octoprint.util.commandline.CommandlineCaller.on_log_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback for the called command line</p>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.commandline.CommandlineCaller.on_log_stderr">
<code class="descname">on_log_stderr</code><em class="property"> = None</em><a class="headerlink" href="#octoprint.util.commandline.CommandlineCaller.on_log_stderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback for stderr output</p>
</dd></dl>

<dl class="attribute">
<dt id="octoprint.util.commandline.CommandlineCaller.on_log_stdout">
<code class="descname">on_log_stdout</code><em class="property"> = None</em><a class="headerlink" href="#octoprint.util.commandline.CommandlineCaller.on_log_stdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback for stdout output</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="octoprint.util.commandline.CommandlineError">
<em class="property">exception </em><code class="descclassname">octoprint.util.commandline.</code><code class="descname">CommandlineError</code><span class="sig-paren">(</span><em>returncode</em>, <em>stdout</em>, <em>stderr</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.commandline.CommandlineError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised by <code class="xref py py-func docutils literal notranslate"><span class="pre">checked_call()</span></code> on non zero return codes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>returncode</strong> (<em>int</em>) – the return code of the command</li>
<li><strong>stdout</strong> (<em>str</em>) – the stdout output produced by the command</li>
<li><strong>stderr</strong> (<em>str</em>) – the stderr output produced by the command</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="octoprint.util.commandline.DelimiterCapture">
<em class="property">class </em><code class="descclassname">octoprint.util.commandline.</code><code class="descname">DelimiterCapture</code><span class="sig-paren">(</span><em>delimiter=b'n'</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.commandline.DelimiterCapture" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="octoprint.util.commandline.clean_ansi">
<code class="descclassname">octoprint.util.commandline.</code><code class="descname">clean_ansi</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#octoprint.util.commandline.clean_ansi" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes ANSI control codes from <code class="docutils literal notranslate"><span class="pre">line</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line</strong> (<em>bytes</em><em> or </em><em>unicode</em>) – the line to process</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(bytes or unicode) The line without any ANSI control codes</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;Some text with some [31mred words[39m in it&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clean_ansi</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> 
<span class="go">&#39;Some text with some red words in it&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;We [?25lhide the cursor here and then [?25hshow it again here&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clean_ansi</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> 
<span class="go">&#39;We hide the cursor here and then show it again here&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../jsclientlib/index.html" class="btn btn-neutral float-right" title="JavaScript Client Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="users.html" class="btn btn-neutral float-left" title="octoprint.access.users" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2020, Gina Häußge

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 1.4.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="https://docs.octoprint.org/1.3.12">1.3.12</a></dd>
      <dd><a href="https://docs.octoprint.org/1.4.0">1.4.0</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="https://docs.octoprint.org/master">master</a></dd>
      <dd><a href="https://docs.octoprint.org/maintenance">maintenance</a></dd>
      <dd><a href="https://docs.octoprint.org/devel">devel</a></dd>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>