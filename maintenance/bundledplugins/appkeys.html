<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Application Keys Plugin &mdash; OctoPrint maintenance documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Backup Plugin" href="backup.html" />
    <link rel="prev" title="Anonymous Usage Tracking Plugin" href="tracking.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            OctoPrint
          </a>
              <div class="version">
                maintenance
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Bundled Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="action_command_notification.html">Action Command Notification support</a></li>
<li class="toctree-l2"><a class="reference internal" href="action_command_prompt.html">Action Command Prompt support</a></li>
<li class="toctree-l2"><a class="reference internal" href="announcements.html">Announcement Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracking.html">Anonymous Usage Tracking Plugin</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Application Keys Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#workflow">Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-with-redirect-to-auth-dialog">Workflow with redirect to auth dialog</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#probe-for-workflow-support">Probe for workflow support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-authorization-process">Start authorization process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#poll-for-decision-on-existing-request">Poll for decision on existing request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decide-on-existing-request">Decide on existing request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fetch-list-of-existing-application-keys">Fetch list of existing application keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="#issue-an-application-key-command">Issue an application key command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-model">Data model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#authorization-request">Authorization request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#authorization-response">Authorization response</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key-response">Key response</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decision-request">Decision request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-response">List response</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key-list-entry">Key list entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pending-list-entry">Pending list entry</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#javascript-client-library">JavaScript Client Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="backup.html">Backup Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery.html">Discovery Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="errortracking.html">Error Tracking Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_check.html">File Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="firmware_check.html">Firmware Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcodeviewer.html">GCode Viewer Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="pluginmanager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="softwareupdate.html">Software Update Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtual_printer.html">Virtual Printer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events/index.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Developing Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Internal Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jsclientlib/index.html">JavaScript Client Library</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OctoPrint</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">


  <p style="padding: 10px;margin: 0 0 10px 0;border-radius: 2px;letter-spacing: 1px;font-size: 13px;color: white;text-align: center;background: #3a87ad;background-image: none;background-size: auto;background-size: 28px 28px;background-image: linear-gradient( -45deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent );">
    <strong>Note:</strong>
    These are not the docs of the latest released version. Those can be found <a href="https://docs.octoprint.org/en/1.8.7" style="color: white;text-decoration: underline">here</a>.
  </p>


  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Bundled Plugins</a> &raquo;</li>
        
      <li>Application Keys Plugin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/bundledplugins/appkeys.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="application-keys-plugin">
<span id="sec-bundledplugins-appkeys"></span><h1>Application Keys Plugin<a class="headerlink" href="#application-keys-plugin" title="Permalink to this headline"></a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.10.</span></p>
</div>
<p>The OctoPrint Application Keys Plugin comes bundled with OctoPrint.</p>
<p>It implements a workflow for third party apps or clients to obtain an application specific API key from OctoPrint to interact with it
on a user’s behalf, via confirmation of the user through OctoPrint’s web interface. Existing keys can be managed
on a per-user base as well as globally by administrators.</p>
<figure class="align-center" id="id10">
<span id="fig-bundledplugins-appkeys-confirmation"></span><img alt="Confirmation" src="../_images/bundledplugins-appkeys-confirmation_prompt.png" />
<figcaption>
<p><span class="caption-number">Fig. 11 </span><span class="caption-text">The plugin’s confirmation generated for a new application key request.</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id11">
<span id="fig-bundledplugins-appkeys-user-settings"></span><img alt="Key management via user settings" src="../_images/bundledplugins-appkeys-user_settings.png" />
<figcaption>
<p><span class="caption-number">Fig. 12 </span><span class="caption-text">Users can manage the application specific API keys registered to their account via their user settings.</span><a class="headerlink" href="#id11" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id12">
<span id="fig-bundledplugins-appkeys-settings"></span><img alt="Global key management via settings" src="../_images/bundledplugins-appkeys-settings.png" />
<figcaption>
<p><span class="caption-number">Fig. 13 </span><span class="caption-text">Administrators can manage all application specific API keys registered to any user.</span><a class="headerlink" href="#id12" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="workflow">
<span id="sec-bundledplugins-appkeys-workflow"></span><h2>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline"></a></h2>
<p>The workflow to receive an API key for a third party client/an app via the Application Keys Plugin should consist
of the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The User opens the App and gets prompted to enter or select an instance URL. Optionally (recommended!) the User also
enters their username which is also their user ID into the App.</p></li>
<li><p>The App <a class="reference internal" href="#sec-bundledplugins-appkeys-api-probe"><span class="std std-ref">probes for workflow support</span></a> on the Server. If this request
doesn’t get an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a> the App needs to direct the user to an alternative manual workflow
(copy-paste API key) and abort this one. Otherwise it proceeds to the next step.</p></li>
<li><p>The App sends an <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-authrequest"><span class="std std-ref">Authorization request</span></a> to the Server to start the
authorization process.</p></li>
<li><p>The Server triggers a confirmation dialog for the User on the Webinterface (unused here) and returns an endpoint to the
App to poll for a decision in the <code class="docutils literal notranslate"><span class="pre">Location</span></code> header of an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a>
and an <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-authresponse"><span class="std std-ref">Authorization response</span></a> (unused here).</p></li>
<li><p>The App uses the obtained request specific endpoint to poll for a decision every second. An HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3">202 Accepted</a>
signals that no decision has been made yet.</p></li>
<li><p>The User either accepts or denies the access request which makes the Webinterface send a
<a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-decisionrequest"><span class="std std-ref">decision request</span></a> to the Server.</p></li>
<li><p>If the User accepted the request, the App receives an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> with an attached
<a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-keyresponse"><span class="std std-ref">API key response</span></a>. If they deny it, the App will receive
an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a>.</p></li>
</ol>
</div></blockquote>
<object data="../_images/mermaid-29cc0989a08e3995529dfe636546bddf4d51634b.svg" type="image/svg+xml">
            <p class="warning">sequenceDiagram
   participant User
   participant App
   participant Webinterface
   participant Server

   note over User, Server: Step 1, 2 &amp; 3

   User-&gt;&gt;App: enters URL of instance to connect to and optional user_id

   App-&gt;&gt;Server: GET /plugin/appkeys/probe

   alt Workflow unsupported

   Server-&gt;&gt;App: 404
   App-&gt;&gt;User: alternative workflow, copy-paste key manually

   else Workflow supported

   App-&gt;&gt;Server: POST /plugin/appkeys/request, (app_name, user_id)

   note over User, Server: Step 4

   Server--&gt;&gt;Webinterface: plugin message for &quot;appkeys&quot; w/ (app_name, user_token, user_id)
   Webinterface--&gt;&gt;User: Display confirmation dialog
   Server-&gt;&gt;App: 201, Location: /plugin/appkeys/request/&lt;app_token&gt;

   note over User, Server: Step 5

   loop Poll for decision
   App-&gt;&gt;Server: GET /plugin/appkeys/request/&lt;app_token&gt;
   Server-&gt;&gt;App: 202
   end

   note over User, Server: Step 6 &amp; 7

   alt User accepts

   User--&gt;&gt;Webinterface: Allow access
   Webinterface-&gt;&gt;Server: POST /plugin/appkeys/decision/&lt;user_token&gt;, (True)
   Server-&gt;&gt;Webinterface: 204
   App-&gt;&gt;Server: GET /plugin/appkeys/request/&lt;app_token&gt;
   Server-&gt;&gt;App: 200, api_key

   else User denies

   User--&gt;&gt;Webinterface: Deny access
   Webinterface-&gt;&gt;Server: POST /plugin/appkeys/decision/&lt;user_token&gt;, (False)
   Server-&gt;&gt;Webinterface: 204
   App-&gt;&gt;Server: GET /plugin/appkeys/request/&lt;app_token&gt;
   Server-&gt;&gt;App: 404

   end

   end</p></object>
</section>
<section id="workflow-with-redirect-to-auth-dialog">
<span id="sec-bundledplugins-appkeys-workflow-authdialog"></span><h2>Workflow with redirect to auth dialog<a class="headerlink" href="#workflow-with-redirect-to-auth-dialog" title="Permalink to this headline"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.8.0.</span></p>
</div>
<p>Instead of asking the user to open the full blown OctoPrint interface to confirm the request,
since OctoPrint 1.8.0 there also exists the alternative of redirecting the user to a
basic auth dialog that allows logging in and confirming the request in a light-weight
dialog. To implementat that, follow these steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The User opens the App and gets prompted to enter or select an instance URL. Optionally (recommended!) the User also
enters their username which is also their user ID into the App.</p></li>
<li><p>The App <a class="reference internal" href="#sec-bundledplugins-appkeys-api-probe"><span class="std std-ref">probes for workflow support</span></a> on the Server. If this request
doesn’t get an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a> the App needs to direct the user to an alternative manual workflow
(copy-paste API key) and abort this one. Otherwise it proceeds to the next step.</p></li>
<li><p>The App sends an <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-authrequest"><span class="std std-ref">Authorization request</span></a> to the Server to start the
authorization process.</p></li>
<li><p>The Server triggers a confirmation dialog for the User on the Webinterface (unused here) and returns an endpoint to the
App to poll for a decision in the <code class="docutils literal notranslate"><span class="pre">Location</span></code> header of an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a>
and an <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-authresponse"><span class="std std-ref">Authorization response</span></a>.</p></li>
<li><p>The App opens a browser window with the provided <cite>auth_dialog</cite> URL for the user to log in and confirm the request. At the
same time the App also uses the obtained request specific endpoint to poll for a decision every second. An HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3">202 Accepted</a>
signals that no decision has been made yet.</p></li>
<li><p>The User logs in and either accepts or denies the access request which makes the auth dialog send a
<a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-decisionrequest"><span class="std std-ref">decision request</span></a> to the Server.</p></li>
<li><p>If the User accepted the request, the App receives an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> with an attached
<a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-keyresponse"><span class="std std-ref">API key response</span></a>. If they deny it, the App will receive
an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a>.</p></li>
</ol>
</div></blockquote>
<object data="../_images/mermaid-1e2a4354753c75597109db1548404e3800e6202d.svg" type="image/svg+xml">
            <p class="warning">sequenceDiagram
   participant User
   participant App
   participant Auth Dialog
   participant Server

   note over User, Server: Step 1, 2 &amp; 3

   User-&gt;&gt;App: enters URL of instance to connect to and optional user_id

   App-&gt;&gt;Server: GET /plugin/appkeys/probe

   alt Workflow unsupported

   Server-&gt;&gt;App: 404
   App-&gt;&gt;User: alternative workflow, copy-paste key manually

   else Workflow supported

   App-&gt;&gt;Server: POST /plugin/appkeys/request, (app_name, user_id)

   note over User, Server: Step 4

   Server-&gt;&gt;App: 201, Location: /plugin/appkeys/request/&lt;app_token&gt;, auth_dialog: &lt;auth_dialog&gt;

   note over User, Server: Step 5

   App--&gt;&gt;Auth Dialog: open new browser window with auth_dialog URL

   loop Poll for decision
   App-&gt;&gt;Server: GET /plugin/appkeys/request/&lt;app_token&gt;
   Server-&gt;&gt;App: 202
   end

   note over User, Server: Step 6 &amp; 7

   User-&gt;&gt;Auth Dialog: Logs in

   alt User accepts

   User--&gt;&gt;Auth Dialog: Allow access
   Auth Dialog-&gt;&gt;Server: POST /plugin/appkeys/decision/&lt;user_token&gt;, (True)
   Server-&gt;&gt;Auth Dialog: 204
   App-&gt;&gt;Server: GET /plugin/appkeys/request/&lt;app_token&gt;
   Server-&gt;&gt;App: 200, api_key

   else User denies

   User--&gt;&gt;Auth Dialog: Deny access
   Auth Dialog-&gt;&gt;Server: POST /plugin/appkeys/decision/&lt;user_token&gt;, (False)
   Server-&gt;&gt;Auth Dialog: 204
   App-&gt;&gt;Server: GET /plugin/appkeys/request/&lt;app_token&gt;
   Server-&gt;&gt;App: 404

   end

   end</p></object>
</section>
<section id="api">
<span id="sec-bundledplugins-appkeys-api"></span><h2>API<a class="headerlink" href="#api" title="Permalink to this headline"></a></h2>
<section id="probe-for-workflow-support">
<span id="sec-bundledplugins-appkeys-api-probe"></span><h3>Probe for workflow support<a class="headerlink" href="#probe-for-workflow-support" title="Permalink to this headline"></a></h3>
<dl class="http get">
<dt class="sig sig-object http" id="get--plugin-appkeys-probe">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/plugin/appkeys/probe</span></span><a class="headerlink" href="#get--plugin-appkeys-probe" title="Permalink to this definition"></a></dt>
<dd><p>Probes for support of the workflow.</p>
<p>Normally returns an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a>, indicating workflow availability. If a different status code is returned
(usually an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a>), the plugin is disabled or not installed. Fall back to manual api key exchange.</p>
<dl class="field-list simple">
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a></span> – the workflow is supported</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="start-authorization-process">
<span id="sec-bundledplugins-appkeys-api-startauthprocess"></span><h3>Start authorization process<a class="headerlink" href="#start-authorization-process" title="Permalink to this headline"></a></h3>
<dl class="http post">
<dt class="sig sig-object http" id="post--plugin-appkeys-request">
<span class="sig-name descname"><span class="pre">POST</span> </span><span class="sig-name descname"><span class="pre">/plugin/appkeys/request</span></span><a class="headerlink" href="#post--plugin-appkeys-request" title="Permalink to this definition"></a></dt>
<dd><p>Starts the authorization process.</p>
<p>Expects a <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-authrequest"><span class="std std-ref">Authorization request</span></a> as request body.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">app</span></code> parameter should be a human readable identifier to use
for the application requesting access. It will be displayed to the user. Internally it will be used case insensitively,
so <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">App</span></code> and <code class="docutils literal notranslate"><span class="pre">my</span> <span class="pre">APP</span></code> are considered the same application identifiers.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">user</span></code> parameter should be used to limit the authorization process to a specified user. If the parameter
is left unset, any user will be able to complete the authorization process and grant access to the app with their
account. E.g. if a user <code class="docutils literal notranslate"><span class="pre">me</span></code> starts the process in an app, the app should request that name from the user and use
it in the <code class="docutils literal notranslate"><span class="pre">user</span></code> parameter. OctoPrint will then only display the authorization request on browsers the user <code class="docutils literal notranslate"><span class="pre">me</span></code>
is logged in on.</p>
<p>Returns a <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-authresponse"><span class="std std-ref">Authorization response</span></a>
and HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a> with the <code class="docutils literal notranslate"><span class="pre">Location</span></code> header set to the endpoint to poll for a decision.</p>
<dl class="field-list simple">
<dt class="field-odd">JSON Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – application identifier to use for the request, case insensitive</p></li>
<li><p><strong>user</strong> – optional user id to restrict the decision to the specified user</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a></span> – authorization process started, polling URL to query can be found in <code class="docutils literal notranslate"><span class="pre">Location</span></code> header</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="poll-for-decision-on-existing-request">
<span id="sec-bundledplugins-appkeys-api-polldecision"></span><h3>Poll for decision on existing request<a class="headerlink" href="#poll-for-decision-on-existing-request" title="Permalink to this headline"></a></h3>
<dl class="http get">
<dt class="sig sig-object http" id="get--plugin-appkeys-request--str-app_token-">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/plugin/appkeys/request/&lt;str:app_token&gt;</span></span><a class="headerlink" href="#get--plugin-appkeys-request--str-app_token-" title="Permalink to this definition"></a></dt>
<dd><p>Endpoint generated per authorization request to poll for the result.</p>
<p>Returns an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3">202 Accepted</a> while no decision has been made yet, an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> and
a <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-keyresponse"><span class="std std-ref">Key response</span></a> if access has been granted and an
HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a> if the request has been denied or timed out.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The request will be considered stale and deleted internally if the polling endpoint for it isn’t called
for more than 5s.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – access granted, API key in response body</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3">202 Accepted</a></span> – no decision has been made yet, continue polling</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a></span> – access denied or request timed out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="decide-on-existing-request">
<span id="sec-bundledplugins-appkeys-api-decide"></span><h3>Decide on existing request<a class="headerlink" href="#decide-on-existing-request" title="Permalink to this headline"></a></h3>
<dl class="http post">
<dt class="sig sig-object http" id="post--plugin-appkeys-decision--str-user_token-">
<span class="sig-name descname"><span class="pre">POST</span> </span><span class="sig-name descname"><span class="pre">/plugin/appkeys/decision/&lt;str:user_token&gt;</span></span><a class="headerlink" href="#post--plugin-appkeys-decision--str-user_token-" title="Permalink to this definition"></a></dt>
<dd><p>Endpoint to decide on the authorization request.</p>
<p>Expects a <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-decisionrequest"><span class="std std-ref">Decision request</span></a> as request body.</p>
<p>Returns an HTTP <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a> on success.</p>
<dl class="field-list simple">
<dt class="field-odd">JSON Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>decision</strong> – boolean value to indicate whether to confirm (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or deny (<code class="docutils literal notranslate"><span class="pre">False</span></code>) access</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a></span> – success</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="fetch-list-of-existing-application-keys">
<span id="sec-bundledplugins-appkeys-api-fetchlist"></span><h3>Fetch list of existing application keys<a class="headerlink" href="#fetch-list-of-existing-application-keys" title="Permalink to this headline"></a></h3>
<dl class="http get">
<dt class="sig sig-object http" id="get--api-plugin-appkeys">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/api/plugin/appkeys</span></span><a class="headerlink" href="#get--api-plugin-appkeys" title="Permalink to this definition"></a></dt>
<dd><p>Fetches a list of existing application keys and pending requests registered in the system for the current user.</p>
<p>If the additional optional parameter <code class="docutils literal notranslate"><span class="pre">all</span></code> is provided and the user has administrator rights, fetches a list
of <em>all*</em> application keys and pending requests registered in the system for any user.</p>
<p>Returns a <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> with a <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-listreponse"><span class="std std-ref">List response</span></a> in the
body upon success.</p>
<dl class="field-list simple">
<dt class="field-odd">Query Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all</strong> – Fetch all application keys and pending requests from all users. Requires administrator rights.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="issue-an-application-key-command">
<span id="sec-bundledplugins-appkeys-api-issuecommand"></span><h3>Issue an application key command<a class="headerlink" href="#issue-an-application-key-command" title="Permalink to this headline"></a></h3>
<dl class="http post">
<dt class="sig sig-object http" id="post--api-plugin-appkeys">
<span class="sig-name descname"><span class="pre">POST</span> </span><span class="sig-name descname"><span class="pre">/api/plugin/appkeys</span></span><a class="headerlink" href="#post--api-plugin-appkeys" title="Permalink to this definition"></a></dt>
<dd><p>Application key commands allow revoking existing application keys and manually generating new ones. The available
commands are:</p>
<dl class="simple">
<dt>revoke</dt><dd><p>Revokes an existing application key. Must belong to the user issuing the command, unless the user has admin rights
in which case they make revoke any application key in the system. Expects the key in question as parameter <code class="docutils literal notranslate"><span class="pre">key</span></code>.</p>
</dd>
<dt>generate</dt><dd><p>Generates a new application key for the user, using the application identifier provided as parameter <code class="docutils literal notranslate"><span class="pre">app</span></code>.</p>
</dd>
</dl>
<p>Upon success, a status code of <a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a> and an empty body is returned.</p>
<p>Requires user rights.</p>
<p><strong>Example revoke request</strong></p>
<p>Revokes the (fictional) key <code class="docutils literal notranslate"><span class="pre">aabbccddeeff112233445566</span></code>.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/api/plugin/appkeys</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">example.com</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">X-Api-Key</span><span class="o">:</span> <span class="l">abcdef...</span>

<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;revoke&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aabbccddeeff112233445566&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</pre></div>
</div>
<p><strong>Example generate request</strong></p>
<p>Generates a new key for application identifier “My awesome application 1.0”.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/api/plugin/appkeys</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">example.com</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">X-Api-Key</span><span class="o">:</span> <span class="l">abcdef...</span>

<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;My awesome application 1.0&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">JSON Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>string</em>) – The command to issue, either <code class="docutils literal notranslate"><span class="pre">revoke</span></code> or <code class="docutils literal notranslate"><span class="pre">generate</span></code></p></li>
<li><p><strong>key</strong> (<em>string</em>) – <code class="docutils literal notranslate"><span class="pre">revoke</span></code> command: The key to revoke</p></li>
<li><p><strong>app</strong> (<em>string</em>) – <code class="docutils literal notranslate"><span class="pre">generate</span></code> command: Application identifier for which to generate a key</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a></span> – No error</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a></span> – Invalid or missing parameter</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="data-model">
<span id="sec-bundledplugins-appkey-datamodel"></span><h2>Data model<a class="headerlink" href="#data-model" title="Permalink to this headline"></a></h2>
<section id="authorization-request">
<span id="sec-bundledplugins-appkey-datamodel-authrequest"></span><h3>Authorization request<a class="headerlink" href="#authorization-request" title="Permalink to this headline"></a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Multiplicity</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">app</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>Application identifier to use for the request</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">user</span></code></p></td>
<td><p>0..1</p></td>
<td><p>str</p></td>
<td><p>User identifier/name to restrict the request to</p></td>
</tr>
</tbody>
</table>
</section>
<section id="authorization-response">
<span id="sec-bundledplugins-appkey-datamodel-authresponse"></span><h3>Authorization response<a class="headerlink" href="#authorization-response" title="Permalink to this headline"></a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Multiplicity</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">app_token</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>Application token to use to poll for the decision.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">auth_dialog</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>An URL with which a dedicated auth dialog can be used for the user to log into
and authorize the request.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="key-response">
<span id="sec-bundledplugins-appkey-datamodel-keyresponse"></span><h3>Key response<a class="headerlink" href="#key-response" title="Permalink to this headline"></a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Multiplicity</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">api_key</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>the API key generated for the application</p></td>
</tr>
</tbody>
</table>
</section>
<section id="decision-request">
<span id="sec-bundledplugins-appkey-datamodel-decisionrequest"></span><h3>Decision request<a class="headerlink" href="#decision-request" title="Permalink to this headline"></a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Multiplicity</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">decision</span></code></p></td>
<td><p>1</p></td>
<td><p>boolean</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the access request it to be granted, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p></td>
</tr>
</tbody>
</table>
</section>
<section id="list-response">
<span id="sec-bundledplugins-appkey-datamodel-listreponse"></span><h3>List response<a class="headerlink" href="#list-response" title="Permalink to this headline"></a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Multiplicity</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keys</span></code></p></td>
<td><p>1</p></td>
<td><p>list of <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-keylistentry"><span class="std std-ref">key list entries</span></a></p></td>
<td><p>Keys registered in the system</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pending</span></code></p></td>
<td><p>1</p></td>
<td><p>list of <a class="reference internal" href="#sec-bundledplugins-appkey-datamodel-pendinglistentry"><span class="std std-ref">pending list entries</span></a></p></td>
<td><p>Currently pending authorization requests</p></td>
</tr>
</tbody>
</table>
</section>
<section id="key-list-entry">
<span id="sec-bundledplugins-appkey-datamodel-keylistentry"></span><h3>Key list entry<a class="headerlink" href="#key-list-entry" title="Permalink to this headline"></a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Multiplicity</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">api_key</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>API key</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">app_id</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>Application identifier</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">user_id</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>User ID of the key’s owner</p></td>
</tr>
</tbody>
</table>
</section>
<section id="pending-list-entry">
<span id="sec-bundledplugins-appkey-datamodel-pendinglistentry"></span><h3>Pending list entry<a class="headerlink" href="#pending-list-entry" title="Permalink to this headline"></a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Multiplicity</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">app_id</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>Application identifier</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">user_id</span></code></p></td>
<td><p>0..1</p></td>
<td><p>str</p></td>
<td><p>optional: User ID of user who can grant or deny request</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">user_token</span></code></p></td>
<td><p>1</p></td>
<td><p>str</p></td>
<td><p>Token to grant or deny request</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="javascript-client-library">
<span id="sec-bundledplugins-appkeys-jsclientlib"></span><h2>JavaScript Client Library<a class="headerlink" href="#javascript-client-library" title="Permalink to this headline"></a></h2>
<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.getKeys">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">getKeys</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.getKeys" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves registered keys and pending requests for the current user.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-fetchlist"><span class="std std-ref">Fetch list of existing application keys</span></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.getAllKeys">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">getAllKeys</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.getAllKeys" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves registered keys and pending requests for all users.</p>
<p>Needs administrator rights.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-fetchlist"><span class="std std-ref">Fetch list of existing application keys</span></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.generateKey">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">generateKey</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.generateKey" title="Permalink to this definition"></a></dt>
<dd><p>Generates a key for the given <code class="docutils literal notranslate"><span class="pre">app</span></code> and the current user.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-issuecommand"><span class="std std-ref">Issue an application key command</span></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – Application identifier</p></li>
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.revokeKey">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">revokeKey</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.revokeKey" title="Permalink to this definition"></a></dt>
<dd><p>Revokes the given <code class="docutils literal notranslate"><span class="pre">key</span></code>. The key must belong to the current user, or the current user must have administrator
rights.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-issuecommand"><span class="std std-ref">Issue an application key command</span></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – Key to revoke</p></li>
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.decide">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">decide</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.decide" title="Permalink to this definition"></a></dt>
<dd><p>Decides on an existing authorization request.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-decide"><span class="std std-ref">Decide on existing request</span></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>token</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – User token for which to make the decision, as pushed to the client via the socket.</p></li>
<li><p><strong>decision</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">boolean()</span></code></span>) – Whether to grant access (<code class="docutils literal notranslate"><span class="pre">true</span></code>) or not (<code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></li>
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.probe">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">probe</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.probe" title="Permalink to this definition"></a></dt>
<dd><p>Probes for workflow support.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-probe"><span class="std std-ref">Probe for workflow support</span></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.request">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">request</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.request" title="Permalink to this definition"></a></dt>
<dd><p>Starts a new authorization request for the provided <code class="docutils literal notranslate"><span class="pre">app</span></code> identifier.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-startauthprocess"><span class="std std-ref">Start authorization process</span></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.requestForUser">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">requestForUser</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.requestForUser" title="Permalink to this definition"></a></dt>
<dd><p>Starts a new authorization request for the provided <code class="docutils literal notranslate"><span class="pre">app</span></code> and <code class="docutils literal notranslate"><span class="pre">user</span></code> identifiers.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-startauthprocess"><span class="std std-ref">Start authorization process</span></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.checkDecision">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">checkDecision</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.checkDecision" title="Permalink to this definition"></a></dt>
<dd><p>Polls for a decision on an existing authorization request identified by <code class="docutils literal notranslate"><span class="pre">token</span></code>.</p>
<p>See <a class="reference internal" href="#sec-bundledplugins-appkeys-api-polldecision"><span class="std std-ref">Poll for decision on existing request</span></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="OctoPrintClient.plugins.appkeys.authenticate">
<span class="sig-prename descclassname"><span class="n"><span class="pre">OctoPrintClient</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">plugins</span></span><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">appkeys</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">authenticate</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OctoPrintClient.plugins.appkeys.authenticate" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function that probes for support, issues a request and then automatically starts polling for a decision
on the returned polling endpoint every 1s, until either a positive or negative decision is returned. On success the
returned promise is resolved with the generated API key as argument. If anything goes wrong or there is no support
for the workflow, the promise is rejected.</p>
<p><strong>Example usage</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">OctoPrint</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">appkeys</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="s2">&quot;My App&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;some_user&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">api_key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Got our API key:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">api_key</span><span class="p">);</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">    </span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;No API key for us&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">})</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – Application identifier</p></li>
<li><p><strong>user</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – Optional user identifier</p></li>
<li><p><strong>opts</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">object()</span></code></span>) – Additional options for the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns Promise</dt>
<dd class="field-even"><p>A <a class="reference external" href="http://api.jquery.com/Types/#Promise">jQuery Promise</a> for the request’s response</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="source-code">
<span id="sec-bundledplugins-appkeys-sourcecode"></span><h2>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline"></a></h2>
<p>The source of the Application Keys plugin is bundled with OctoPrint and can be found in
its source repository under <code class="docutils literal notranslate"><span class="pre">src/octoprint/plugins/appkeys</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tracking.html" class="btn btn-neutral float-left" title="Anonymous Usage Tracking Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="backup.html" class="btn btn-neutral float-right" title="Backup Plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2023, Gina Häußge.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: maintenance
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="https://docs.octoprint.org/en/1.8.7/bundledplugins/appkeys.html">1.8.7</a></dd>
      <dd><a href="https://docs.octoprint.org/en/1.9.0rc2/bundledplugins/appkeys.html">1.9.0rc2</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="https://docs.octoprint.org/en/master/bundledplugins/appkeys.html">master</a></dd>
      <dd><a href="https://docs.octoprint.org/en/maintenance/bundledplugins/appkeys.html">maintenance</a></dd>
      <dd><a href="https://docs.octoprint.org/en/devel/bundledplugins/appkeys.html">devel</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>