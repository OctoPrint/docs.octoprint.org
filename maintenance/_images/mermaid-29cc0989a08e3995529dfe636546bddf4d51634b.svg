<svg id="mermaid-1620398627063" width="100%" xmlns="http://www.w3.org/2000/svg" height="1500" style="max-width: 1468px;" viewBox="-50 -10 1468 1500"><style>#mermaid-1620398627063{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1620398627063 .error-icon{fill:#552222;}#mermaid-1620398627063 .error-text{fill:#552222;stroke:#552222;}#mermaid-1620398627063 .edge-thickness-normal{stroke-width:2px;}#mermaid-1620398627063 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1620398627063 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1620398627063 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1620398627063 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1620398627063 .marker{fill:#333333;stroke:#333333;}#mermaid-1620398627063 .marker.cross{stroke:#333333;}#mermaid-1620398627063 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1620398627063 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1620398627063 text.actor &gt; tspan{fill:black;stroke:none;}#mermaid-1620398627063 .actor-line{stroke:grey;}#mermaid-1620398627063 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1620398627063 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1620398627063 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1620398627063 .sequenceNumber{fill:white;}#mermaid-1620398627063 #sequencenumber{fill:#333;}#mermaid-1620398627063 #crosshead path{fill:#333;stroke:#333;}#mermaid-1620398627063 .messageText{fill:#333;stroke:#333;}#mermaid-1620398627063 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1620398627063 .labelText,#mermaid-1620398627063 .labelText &gt; tspan{fill:black;stroke:none;}#mermaid-1620398627063 .loopText,#mermaid-1620398627063 .loopText &gt; tspan{fill:black;stroke:none;}#mermaid-1620398627063 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1620398627063 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1620398627063 .noteText,#mermaid-1620398627063 .noteText &gt; tspan{fill:black;stroke:none;}#mermaid-1620398627063 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1620398627063 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1620398627063 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1620398627063:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-1620398627063 sequence{fill:apa;}</style><g></g><g><line id="actor0" x1="75" y1="5" x2="75" y2="1489" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">User</tspan></text></g><g><line id="actor1" x1="552" y1="5" x2="552" y2="1489" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="477" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="552" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="552" dy="0">App</tspan></text></g><g><line id="actor2" x1="752" y1="5" x2="752" y2="1489" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="677" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="752" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="752" dy="0">Webinterface</tspan></text></g><g><line id="actor3" x1="1293" y1="5" x2="1293" y2="1489" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1218" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1293" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1293" dy="0">Server</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><g><rect x="50" y="75" fill="#EDF2AE" stroke="#666" width="1268" height="36" rx="0" ry="0" class="note"></rect><text x="684" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="684">Step 1, 2 &amp; 3</tspan></text></g><text x="314" y="126" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">enters URL of instance to connect to and optional user_id</text><line x1="75" y1="157" x2="552" y2="157" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="172" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">GET /plugin/appkeys/probe</text><line x1="552" y1="201" x2="1293" y2="201" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="261" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">404</text><line x1="1293" y1="290" x2="552" y2="290" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="314" y="305" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">alternative workflow, copy-paste key manually</text><line x1="552" y1="334" x2="75" y2="334" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="394" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST /plugin/appkeys/request, (app_name, user_id)</text><line x1="552" y1="425" x2="1293" y2="425" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="50" y="435" fill="#EDF2AE" stroke="#666" width="1268" height="36" rx="0" ry="0" class="note"></rect><text x="684" y="440" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="684">Step 4</tspan></text></g><text x="1023" y="486" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">plugin message for "appkeys" w/ (app_name, user_token, user_id)</text><line x1="1293" y1="517" x2="752" y2="517" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="414" y="532" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Display confirmation dialog</text><line x1="752" y1="561" x2="75" y2="561" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="923" y="576" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">201, Location: /plugin/appkeys/request/&lt;app_token&gt;</text><line x1="1293" y1="607" x2="552" y2="607" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="50" y="617" fill="#EDF2AE" stroke="#666" width="1268" height="36" rx="0" ry="0" class="note"></rect><text x="684" y="622" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="684">Step 5</tspan></text></g><text x="923" y="713" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">GET /plugin/appkeys/request/&lt;app_token&gt;</text><line x1="552" y1="744" x2="1293" y2="744" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="759" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">202</text><line x1="1293" y1="788" x2="552" y2="788" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><line x1="542" y1="663" x2="1303" y2="663" class="loopLine"></line><line x1="1303" y1="663" x2="1303" y2="798" class="loopLine"></line><line x1="542" y1="798" x2="1303" y2="798" class="loopLine"></line><line x1="542" y1="663" x2="542" y2="798" class="loopLine"></line><polygon points="542,663 592,663 592,676 583.6,683 542,683" class="labelBox"></polygon><text x="567" y="676" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">loop</text><text x="947.5" y="681" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="947.5">[Poll for decision]</tspan></text></g><g><rect x="50" y="808" fill="#EDF2AE" stroke="#666" width="1268" height="36" rx="0" ry="0" class="note"></rect><text x="684" y="813" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="684">Step 6 &amp; 7</tspan></text></g><text x="414" y="904" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Allow access</text><line x1="75" y1="933" x2="752" y2="933" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1023" y="948" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST /plugin/appkeys/decision/&lt;user_token&gt;, (True)</text><line x1="752" y1="979" x2="1293" y2="979" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1023" y="994" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">204</text><line x1="1293" y1="1023" x2="752" y2="1023" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="1038" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">GET /plugin/appkeys/request/&lt;app_token&gt;</text><line x1="552" y1="1069" x2="1293" y2="1069" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="1084" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">200, api_key</text><line x1="1293" y1="1115" x2="552" y2="1115" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="414" y="1175" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Deny access</text><line x1="75" y1="1204" x2="752" y2="1204" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1023" y="1219" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST /plugin/appkeys/decision/&lt;user_token&gt;, (False)</text><line x1="752" y1="1250" x2="1293" y2="1250" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1023" y="1265" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">204</text><line x1="1293" y1="1294" x2="752" y2="1294" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="1309" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">GET /plugin/appkeys/request/&lt;app_token&gt;</text><line x1="552" y1="1340" x2="1293" y2="1340" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="923" y="1355" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">404</text><line x1="1293" y1="1384" x2="552" y2="1384" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><line x1="65" y1="854" x2="1303" y2="854" class="loopLine"></line><line x1="1303" y1="854" x2="1303" y2="1394" class="loopLine"></line><line x1="65" y1="1394" x2="1303" y2="1394" class="loopLine"></line><line x1="65" y1="854" x2="65" y2="1394" class="loopLine"></line><line x1="65" y1="1130" x2="1303" y2="1130" class="loopLine" style="stroke-dasharray: 3, 3;"></line><polygon points="65,854 115,854 115,867 106.6,874 65,874" class="labelBox"></polygon><text x="90" y="867" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">alt</text><text x="709" y="872" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="709">[User accepts]</tspan></text><text x="684" y="1148" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">[User denies]</text></g><g><line x1="40" y1="211" x2="1328" y2="211" class="loopLine"></line><line x1="1328" y1="211" x2="1328" y2="1404" class="loopLine"></line><line x1="40" y1="1404" x2="1328" y2="1404" class="loopLine"></line><line x1="40" y1="211" x2="40" y2="1404" class="loopLine"></line><line x1="40" y1="349" x2="1328" y2="349" class="loopLine" style="stroke-dasharray: 3, 3;"></line><polygon points="40,211 90,211 90,224 81.6,231 40,231" class="labelBox"></polygon><text x="65" y="224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">alt</text><text x="709" y="229" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="709">[Workflow unsupported]</tspan></text><text x="684" y="367" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">[Workflow supported]</text></g><g><rect x="0" y="1424" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="1456.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">User</tspan></text></g><g><rect x="477" y="1424" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="552" y="1456.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="552" dy="0">App</tspan></text></g><g><rect x="677" y="1424" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="752" y="1456.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="752" dy="0">Webinterface</tspan></text></g><g><rect x="1218" y="1424" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1293" y="1456.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1293" dy="0">Server</tspan></text></g></svg>