


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="viewmodels.html">
      
      
        <link rel="next" href="distributing.html">
      
      
      <link rel="icon" href="">
    
    
      
        <title>Plugin Tutorial - OctoPrint dev documentation</title>
      
    
    
      
        
      
      


    
    
      
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.acf80fe7f4d9ef9e2.min.css?v=9e56d0d2" />
        <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
        <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css?v=e85523a8" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#saying-hello-how-to-make-the-plugin-actually-do-something" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
    These are not the docs of the latest released version. Those can be found <a href="/en/main">here</a>.

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL(".."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="OctoPrint dev documentation" class="md-header__button md-logo" aria-label="OctoPrint dev documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OctoPrint dev documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plugin Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/OctoPrint/OctoPrint" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    OctoPrint/OctoPrint
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="OctoPrint dev documentation" class="md-nav__button md-logo" aria-label="OctoPrint dev documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
    </a>
    OctoPrint dev documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OctoPrint/OctoPrint" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    OctoPrint/OctoPrint
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../gettingstarted.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Getting Started</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Features</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../bundledplugins/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Bundled Plugins</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Configuration</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>REST API</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../events/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Events</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Development</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    <span>Developing Plugins</span>
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            <span>Developing Plugins</span>
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>General Concepts</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="controlproperties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Control Properties</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="mixins.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Mixins</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="hooks.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Hooks</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="helpers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Helpers</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="injectedproperties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Injected Properties</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="viewmodels.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Viewmodels</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    <span>Plugin Tutorial</span>
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    <span>Plugin Tutorial</span>
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#saying-hello-how-to-make-the-plugin-actually-do-something" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Saying hello:<wbr> How to make the plugin actually do something</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#growing-up-how-to-make-it-distributable" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Growing up:<wbr> How to make it distributable</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frontend-fun-how-to-add-functionality-to-octoprint-s-web-interface" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Frontend fun:<wbr> How to add functionality to Octo<wbr>Print’s web interface</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings-galore-how-to-make-parts-of-your-plugin-user-adjustable" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Settings Galore:<wbr> How to make parts of your plugin user adjustable</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-frontend-fun-adding-custom-javascript-to-your-frontend-components" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>More frontend fun:<wbr> Adding custom javascript to your frontend components</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#style-matters-injecting-custom-css-into-the-page" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Style matters:<wbr> Injecting custom CSS into the page</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-do-we-go-from-here" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Where do we go from here?</span>
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="distributing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Distributing your plugin</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="python3_migration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Migrating to Python 3</span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="pyproject_toml_migration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Migrating to pyproject.<wbr>toml and build isolation</span>
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Internal Modules</span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../jsclientlib/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span>Java<wbr>Script Client Library</span>
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#saying-hello-how-to-make-the-plugin-actually-do-something" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Saying hello:<wbr> How to make the plugin actually do something</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#growing-up-how-to-make-it-distributable" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Growing up:<wbr> How to make it distributable</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frontend-fun-how-to-add-functionality-to-octoprint-s-web-interface" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Frontend fun:<wbr> How to add functionality to Octo<wbr>Print’s web interface</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings-galore-how-to-make-parts-of-your-plugin-user-adjustable" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Settings Galore:<wbr> How to make parts of your plugin user adjustable</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-frontend-fun-adding-custom-javascript-to-your-frontend-components" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>More frontend fun:<wbr> Adding custom javascript to your frontend components</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#style-matters-injecting-custom-css-into-the-page" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Style matters:<wbr> Injecting custom CSS into the page</span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-do-we-go-from-here" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span>Where do we go from here?</span>
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                
                
                  


<h1 id="plugin-tutorial"><span id="sec-plugins-gettingstarted"></span>Plugin Tutorial<a class="headerlink" href="#plugin-tutorial" title="Link to this heading">¶</a></h1>
<p>Over the course of this little tutorial we’ll build a full fledged, installable OctoPrint plugin that displays “Hello World!”
at some locations throughout OctoPrint and also offers some other basic functionality to give you an idea of what
you can achieve with OctoPrint’s plugin system.</p>
<p>First of all let use make sure that you have OctoPrint checked out and set up for development on your local
development environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>$ cd ~/devel
$ git clone https://github.com/OctoPrint/OctoPrint
[...]
$ cd OctoPrint
$ virtualenv venv
[...]
$ source venv/bin/activate
(venv) $ pip install -e &#39;.[develop,plugins]&#39;
[...]
(venv) $ octoprint --help
Usage: octoprint [OPTIONS] COMMAND [ARGS]...

[...]
</code></pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>You can also develop your plugin directly on your Raspberry Pi running OctoPi of course. In that
case please ignore the above instructions, you’ll only need to activate the <code class="docutils literal notranslate"><span class="pre">oprint</span></code>
virtual environment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>$ source ~/oprint/bin/activate
(oprint) $ octoprint --help
Usage: octoprint [OPTIONS] COMMAND [ARGS]...

[...]
</code></pre></div>
</div>
<p>Setting up a local development environment will most likely be less painful than developing directly
on the Pi. So do yourself the favor and do that instead where possible.</p>
</div>
<div class="important tip admonition">
<p class="admonition-title">Important</p>
<p>This tutorial assumes you are running OctoPrint 1.3.0 and up. Please make sure your version of
OctoPrint is up to date before proceeding. If you did a fresh checkout, that should already
be the case but if not you might have to update first. You can check your version of OctoPrint
by running <code class="docutils literal notranslate"><span class="pre">octoprint</span> <span class="pre">--version</span></code> or by taking a look into the lower left corner in OctoPrint’s
web interface.</p>
</div>
<p>We’ll start at the most basic form a plugin can take - just a few simple lines of Python code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.0&quot;</span>
<span class="n">__plugin_description__</span> <span class="o">=</span> <span class="s2">&quot;A quick </span><span class="se">\&quot;</span><span class="s2">Hello World</span><span class="se">\&quot;</span><span class="s2"> example plugin for OctoPrint&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
</code></pre></div>
</div>
<p>Saving this as <code class="docutils literal notranslate"><span class="pre">helloworld.py</span></code> in <code class="docutils literal notranslate"><span class="pre">~/.octoprint/plugins</span></code> yields you something resembling these log entries upon server startup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>(venv) $ octoprint serve
2023-11-20 11:14:35,122 - octoprint.startup - INFO - ******************************************************************************
2023-11-20 11:14:35,124 - octoprint.startup - INFO - Starting OctoPrint 1.9.3
2023-11-20 11:14:35,124 - octoprint.startup - INFO - ******************************************************************************
[...]
2023-11-20 11:14:35,124 - octoprint.plugin.core - INFO - Loading plugins from /home/gina/.octoprint/plugins, /home/gina/devel/OctoPrint/src/octoprint/plugins and installed plugin packages...
[...]
2023-11-20 11:14:36,135 - octoprint.plugin.core - INFO - 19 plugin(s) registered with the system:
[...]
| Hello World (1.0.0) = /home/gina/.octoprint/plugins/helloworld.py
[...]
</code></pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>For Linux, the plugin folder be <code class="docutils literal notranslate"><span class="pre">~/.octoprint/plugins</span></code>. For Windows it will be <code class="docutils literal notranslate"><span class="pre">%APPDATA%/OctoPrint/plugins</span></code> and for
Mac <code class="docutils literal notranslate"><span class="pre">~/Library/Application</span> <span class="pre">Support/OctoPrint/plugins</span></code>.</p>
</div>
<p>OctoPrint found that plugin in the folder and took a look into it. The name and the version it displays in that log
entry it got from the <code class="docutils literal notranslate"><span class="pre">__plugin_name__</span></code> and <code class="docutils literal notranslate"><span class="pre">__plugin_version__</span></code> lines. It also read the description from
<code class="docutils literal notranslate"><span class="pre">__plugin_description__</span></code> and stored it in an internal data structure, but we’ll just ignore this for now. Additionally
there is <code class="docutils literal notranslate"><span class="pre">__plugin_pythoncompat__</span></code> which tells OctoPrint here that your plugin can be run under any Python versions
between 3.7 and 4. That is necessary so that your plugin will be loadable in OctoPrint instances running under Python 3
but not Python 2 (so you can use modern language features), and going forward you really should no longer have to care about
the end-of-life Python 2.</p>
<h2 id="saying-hello-how-to-make-the-plugin-actually-do-something"><span id="sec-plugins-gettingstarted-sayinghello"></span>Saying hello: How to make the plugin actually do something<a class="headerlink" href="#saying-hello-how-to-make-the-plugin-actually-do-something" title="Link to this heading">¶</a></h2>
<p>Apart from being discovered by OctoPrint, our plugin does nothing yet. We want to change that. Let’s make it print
“Hello World!” to the log upon server startup. Modify our <code class="docutils literal notranslate"><span class="pre">helloworld.py</span></code> like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="hll"><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>
</span><span class="hll">
</span><span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">):</span>
</span><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>
</span>
<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.0&quot;</span>
<span class="n">__plugin_description__</span> <span class="o">=</span> <span class="s2">&quot;A quick </span><span class="se">\&quot;</span><span class="s2">Hello World</span><span class="se">\&quot;</span><span class="s2"> example plugin for OctoPrint&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="hll"><span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</span></code></pre></div>
</div>
<p>and restart OctoPrint. You now get this output in the log:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>2023-11-20 11:17:10,792 - octoprint.plugins.helloworld - INFO - Hello World!
</code></pre></div>
</div>
<p>Neat, isn’t it? We added a custom class that subclasses one of OctoPrint’s <a class="reference internal" href="mixins.html#sec-plugins-mixins"><span class="std std-ref">plugin mixins</span></a>
with <a class="reference internal" href="mixins.html#octoprint.plugin.StartupPlugin" title="octoprint.plugin.StartupPlugin (Python class) — Bases: OctoPrintPlugin, SortablePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">StartupPlugin</span></code></a> and another control property, <code class="docutils literal notranslate"><span class="pre">__plugin_implementation__</span></code>, that instantiates
our plugin class and tells OctoPrint about it. Taking a look at the documentation of <a class="reference internal" href="mixins.html#octoprint.plugin.StartupPlugin" title="octoprint.plugin.StartupPlugin (Python class) — Bases: OctoPrintPlugin, SortablePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">StartupPlugin</span></code></a> we see that
this mixin offers two methods that get called by OctoPrint during startup of the server, <a class="reference internal" href="mixins.html#octoprint.plugin.StartupPlugin.on_startup" title="octoprint.plugin.StartupPlugin.on_startup (Python method) — Called just before the server is actually launched. Plugins get supplied with the host and port the server will listen on. Note that the host may be 0.0.0.0 if it will listen on all interfaces, so you can't just blindly use this for constructing publicly reachable URLs. Also note that when this method is called, the server is not actually up yet and none of your plugin's APIs or blueprints will be reachable yet. If you need to be externally reachable, use on_after_startup() instead or additionally."><code class="xref py py-func docutils literal notranslate"><span class="pre">on_startup()</span></code></a> and
<a class="reference internal" href="mixins.html#octoprint.plugin.StartupPlugin.on_after_startup" title="octoprint.plugin.StartupPlugin.on_after_startup (Python method) — Called just after launch of the server, so when the listen loop is actually running already."><code class="xref py py-func docutils literal notranslate"><span class="pre">on_after_startup()</span></code></a>. We decided to add our logging output by overriding <a class="reference internal" href="mixins.html#octoprint.plugin.StartupPlugin.on_after_startup" title="octoprint.plugin.StartupPlugin.on_after_startup (Python method) — Called just after launch of the server, so when the listen loop is actually running already."><code class="xref py py-func docutils literal notranslate"><span class="pre">on_after_startup()</span></code></a>, but we could also have
used <a class="reference internal" href="mixins.html#octoprint.plugin.StartupPlugin.on_startup" title="octoprint.plugin.StartupPlugin.on_startup (Python method) — Called just before the server is actually launched. Plugins get supplied with the host and port the server will listen on. Note that the host may be 0.0.0.0 if it will listen on all interfaces, so you can't just blindly use this for constructing publicly reachable URLs. Also note that when this method is called, the server is not actually up yet and none of your plugin's APIs or blueprints will be reachable yet. If you need to be externally reachable, use on_after_startup() instead or additionally."><code class="xref py py-func docutils literal notranslate"><span class="pre">on_startup()</span></code></a> instead, in which case our logging statement would be executed before the server was done starting
up and ready to serve requests.</p>
<p>You’ll also note that we are using <code class="docutils literal notranslate"><span class="pre">self._logger</span></code> for logging. Where did that one come from? OctoPrint’s plugin system
injects <a class="reference internal" href="mixins.html#sec-plugins-mixins-injectedproperties"><span class="std std-ref">a some useful objects</span></a> into our plugin implementation classes,
one of those being a fully instantiated <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">python</span> <span class="pre">logger</span></code></a> ready to be
used by your plugin. As you can see in the log output above, that logger uses the namespace <code class="docutils literal notranslate"><span class="pre">octoprint.plugins.helloworld</span></code>
for our little plugin here, or more generally <code class="docutils literal notranslate"><span class="pre">octoprint.plugins.&lt;plugin</span> <span class="pre">identifier&gt;</span></code>.</p>
<h2 id="growing-up-how-to-make-it-distributable"><span id="sec-plugins-gettingstarted-growingup"></span>Growing up: How to make it distributable<a class="headerlink" href="#growing-up-how-to-make-it-distributable" title="Link to this heading">¶</a></h2>
<p>If you now want to distribute this plugin to other OctoPrint users (since it is so awesome to be greeted upon server
startup), let’s take a look at how you’d go about that now before our plugin gets more complicated.</p>
<p>You basically have two options to distribute your plugin. One would be about the exact same way we are using it now,
as a simple python file following the naming convention <code class="docutils literal notranslate"><span class="pre">&lt;plugin</span> <span class="pre">identifier&gt;.py</span></code> that your users add to their
<code class="docutils literal notranslate"><span class="pre">~/.octoprint/plugins</span></code> folder. You already know how that works. But let’s say you have more than just a simple plugin
that can be done in one file. Distributing multiple files and getting your users to install them in the right way
so that OctoPrint will be able to actually find and load them is certainly not impossible, but we want to do it in the
best way possible, meaning we want to make our plugin a fully installable Python module that your users will be able to
install directly via <a class="reference external" href="https://docs.octoprint.org/en/main/bundledplugins/pluginmanager.html">OctoPrint’s built-in Plugin Manager</a>
or alternatively manually utilizing Python’s standard package manager <code class="docutils literal notranslate"><span class="pre">pip</span></code> directly.</p>
<p>So let’s begin. We’ll use the <a class="reference external" href="https://github.com/audreyr/cookiecutter">cookiecutter</a> template for OctoPrint plugins
here. This should already be installed if you used the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> extra while installing OctoPrint.  However,
you may install it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>(venv) $ pip install &quot;cookiecutter&gt;=2.1.1,&lt;3&quot;
</code></pre></div>
</div>
<p>Then we can use the <code class="docutils literal notranslate"><span class="pre">octoprint</span> <span class="pre">dev</span> <span class="pre">plugin:new</span></code> command <a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> to generate a new OctoPrint plugin skeleton for us:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>(venv) $ cd ~/devel
(venv) $ octoprint dev plugin:new helloworld
Cloning into &#39;cookiecutter-octoprint-plugin&#39;...
remote: Counting objects: 101, done.
remote: Total 101 (delta 0), reused 0 (delta 0), pack-reused 101
Receiving objects: 100% (101/101), 53.69 KiB, done.
Resolving deltas: 100% (35/35), done.
plugin_package [octoprint_helloworld]:
plugin_name [OctoPrint-Helloworld]:
repo_name [OctoPrint-Helloworld]:
full_name [You]: Your Name
email [you@example.com]: you@somewhere.net
github_username [you]: yourGithubName
plugin_version [0.1.0]: 1.0.0
plugin_description [TODO]: A quick &quot;Hello World&quot; example plugin for OctoPrint
plugin_license [AGPLv3]:
plugin_homepage [https://github.com/yourGithubName/OctoPrint-Helloworld]:
plugin_source [https://github.com/yourGithubName/OctoPrint-Helloworld]:
plugin_installurl [https://github.com/yourGithubName/OctoPrint-Helloworld/archive/master.zip]:
(venv) $ cd OctoPrint-HelloWorld
</code></pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">octoprint</span> <span class="pre">dev</span> <span class="pre">plugin:new</span></code> isn’t recognized as a command (and also doesn’t show up in the output of
<code class="docutils literal notranslate"><span class="pre">octoprint</span> <span class="pre">--help</span></code>, make sure you installed cookiecutter into the same python environment as OctoPrint.</p>
</div>
<p>This will create a project structure in the <code class="docutils literal notranslate"><span class="pre">OctoPrint-HelloWorld</span></code> folder we just changed to that looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">extras</span><span class="o">/</span>
    <span class="n">github</span><span class="o">/</span>
        <span class="n">bug_report</span><span class="o">.</span><span class="n">yml</span>
        <span class="n">feature_request</span><span class="o">.</span><span class="n">yml</span>
    <span class="n">README</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">helloworld</span><span class="o">.</span><span class="n">md</span>
<span class="n">octoprint_helloworld</span><span class="o">/</span>
    <span class="n">static</span><span class="o">/</span>
        <span class="n">css</span><span class="o">/</span>
            <span class="n">README</span><span class="o">.</span><span class="n">txt</span>
        <span class="n">js</span><span class="o">/</span>
            <span class="n">README</span><span class="o">.</span><span class="n">txt</span>
        <span class="n">less</span><span class="o">/</span>
            <span class="n">README</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">templates</span><span class="o">/</span>
        <span class="n">README</span><span class="o">.</span><span class="n">txt</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="n">translations</span><span class="o">/</span>
    <span class="n">README</span><span class="o">.</span><span class="n">txt</span>
<span class="o">.</span><span class="n">editorconfig</span>
<span class="o">.</span><span class="n">gitignore</span>
<span class="n">babel</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">MANIFEST</span><span class="o">.</span><span class="ow">in</span>
<span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
<span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">Taskfile</span><span class="o">.</span><span class="n">yml</span>
</code></pre></div>
</div>
<p>While we’ll need some of those folders later on, we’ll now delete everything that we don’t need right now first, that
will make it easier to understand what folder does what later on. Delete the following folders and anything in them:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">extras</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">translations</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">octoprint_helloworld/static</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">octoprint_helloworld/templates</span></code></p></li>
</ul>
<p>The final project structure should look like this for now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">octoprint_helloworld</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="o">.</span><span class="n">editorconfig</span>
<span class="o">.</span><span class="n">gitignore</span>
<span class="n">babel</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">MANIFEST</span><span class="o">.</span><span class="ow">in</span>
<span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
<span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">Taskfile</span><span class="o">.</span><span class="n">yml</span>
</code></pre></div>
</div>
<p>Out of curiosity, take a look into the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. The cookiecutter template should have prefilled all the
configuration parameters for you:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><code><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;setuptools&gt;=68&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wheel&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;setuptools.build_meta&quot;</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;OctoPrint-Helloworld&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A quick &quot;</span><span class="n">Hello</span><span class="w"> </span><span class="n">World</span><span class="s2">&quot; example plugin for OctoPrint&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;Your name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;you@somewhere.net&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">file</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">content-type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;text/markdown&quot;</span><span class="p">}</span>
<span class="n">dynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;license&quot;</span>
<span class="p">]</span>

<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.7, &lt;4&quot;</span>

<span class="c1"># any additional requirements (besides OctoPrint) should be listed here</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="k">[tool.setuptools]</span>
<span class="n">include-package-data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>

<span class="k">[tool.setuptools.packages.find]</span>
<span class="n">include</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;octoprint_helloworld&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;octoprint_helloworld.*&quot;</span>
<span class="p">]</span>

<span class="k">[project.entry-points.</span><span class="s2">&quot;octoprint.plugin&quot;</span><span class="k">]</span>
<span class="n">helloworld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;octoprint_helloworld&quot;</span>

<span class="k">[project.urls]</span>
<span class="n">Homepage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/yourGithubName/OctoPrint-Helloworld&quot;</span>

<span class="k">[project.optional-dependencies]</span>
<span class="n">develop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;go-task-bin&quot;</span>
<span class="p">]</span>
</code></pre></div>
</div>
<p>Now all that’s left to do is to move our <code class="docutils literal notranslate"><span class="pre">helloworld.py</span></code> into the <code class="docutils literal notranslate"><span class="pre">octoprint_helloworld</span></code> folder and renaming it to
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>. Make sure to delete the copy under <code class="docutils literal notranslate"><span class="pre">~/.octoprint/plugins</span></code> in the process, including the <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> file!</p>
<p>The plugin is now ready to be installed via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code>. However, since we are still
working on our plugin, it makes more sense to use <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code> for now – this way the plugin becomes
discoverable by OctoPrint, however we don’t have to reinstall it after any changes we will still do. We can have the
<code class="docutils literal notranslate"><span class="pre">octoprint</span> <span class="pre">dev</span> <span class="pre">plugin:install</span></code> command do everything for us here, it will ensure to use the python binary belonging
to your OctoPrint installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>(venv) $ octoprint dev plugin:install
&gt;&gt; /home/gina/.pyenv/versions/3.11.2/envs/octoprint-py311/bin/python -m pip install -e .
Obtaining file:///home/gina/devel/OctoPrint-Helloworld

[...]

Installing collected packages: OctoPrint-Helloworld

[...]

Successfully installed OctoPrint-Helloworld-0.1.0
</code></pre></div>
</div>
<p>Restart OctoPrint. Your plugin should still be properly discovered and the log line should be printed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>2023-11-20 13:43:34,132 - octoprint.startup - INFO - ******************************************************************************
2023-11-20 13:43:34,134 - octoprint.startup - INFO - Starting OctoPrint 1.9.3
2023-11-20 13:43:34,134 - octoprint.startup - INFO - ******************************************************************************
[...]
2023-11-20 13:43:34,134 - octoprint.plugin.core - INFO - Loading plugins from /home/gina/.octoprint/plugins, /home/gina/devel/OctoPrint/src/octoprint/plugins and installed plugin packages...
[...]
2023-11-20 13:43:34,818 - octoprint.plugin.core - INFO - 19 plugin(s) registered with the system:
[...]
| Hello World (1.0.0) = /home/gina/devel/OctoPrint-HelloWorld/octoprint_helloworld
[...]
2023-11-20 13:43:38,997 - octoprint.plugins.helloworld - INFO - Hello World!
</code></pre></div>
</div>
<p>Looks like it still works!</p>
<p>Something is still a bit ugly though. Take a look into <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> and <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>. It seems like we have a bunch
of information now defined twice:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption highlight"><span class="filename"><span class="caption-number">Listing 39 </span><span class="caption-text">
</span>__init__.py<a class="headerlink" href="#id3" title="Permalink to this code">¶</a></span></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.0&quot;</span>
<span class="n">__plugin_description__</span> <span class="o">=</span> <span class="s2">&quot;A quick </span><span class="se">\&quot;</span><span class="s2">Hello World</span><span class="se">\&quot;</span><span class="s2"> example plugin for OctoPrint&quot;</span>
</code></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption highlight"><span class="filename"><span class="caption-number">Listing 40 </span><span class="caption-text">
</span>pyproject.toml<a class="headerlink" href="#id4" title="Permalink to this code">¶</a></span></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># ...</span>

<span class="p">[</span><span class="n">project</span><span class="p">]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;OctoPrint-Helloworld&quot;</span>
<span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0.0&quot;</span>
<span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A quick &quot;</span><span class="n">Hello</span> <span class="n">World</span><span class="s2">&quot; example plugin for OctoPrint&quot;</span>

<span class="c1"># ...</span>
</code></pre></div>
</div>
</div>
<p>The nice thing about our plugin now being a proper Python package is that OctoPrint can and will access the metadata defined
within <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>! So, we don’t really need to define all this data twice. Remove <code class="docutils literal notranslate"><span class="pre">__plugin_name__</span></code>, <code class="docutils literal notranslate"><span class="pre">__plugin_version__</span></code>
and <code class="docutils literal notranslate"><span class="pre">__plugin_description__</span></code> from <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>, but leave <code class="docutils literal notranslate"><span class="pre">__plugin_implementation__</span></code> and <code class="docutils literal notranslate"><span class="pre">__plugin_pythoncompat__</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>and restart OctoPrint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20</span> <span class="mi">13</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">786</span> <span class="o">-</span> <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">core</span> <span class="o">-</span> <span class="n">INFO</span> <span class="o">-</span> <span class="mi">19</span> <span class="n">plugin</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">registered</span> <span class="k">with</span> <span class="n">the</span> <span class="n">system</span><span class="p">:</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="o">|</span> <span class="n">OctoPrint</span><span class="o">-</span><span class="n">HelloWorld</span> <span class="p">(</span><span class="mf">1.0.0</span><span class="p">)</span> <span class="o">=</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gina</span><span class="o">/</span><span class="n">devel</span><span class="o">/</span><span class="n">OctoPrint</span><span class="o">-</span><span class="n">HelloWorld</span><span class="o">/</span><span class="n">octoprint_helloworld</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div>
</div>
<p>Our “Hello World” Plugin still gets detected fine, but it’s now listed under the same name it’s installed under,
“OctoPrint-HelloWorld”. That’s a bit redundant and squashed, so we’ll override that bit via <code class="docutils literal notranslate"><span class="pre">__plugin_name__</span></code> again:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="hll"><span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
</span><span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Restart OctoPrint again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20</span> <span class="mi">13</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">54</span><span class="p">,</span><span class="mi">122</span> <span class="o">-</span> <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">core</span> <span class="o">-</span> <span class="n">INFO</span> <span class="o">-</span> <span class="mi">19</span> <span class="n">plugin</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">registered</span> <span class="k">with</span> <span class="n">the</span> <span class="n">system</span><span class="p">:</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="o">|</span> <span class="n">Hello</span> <span class="n">World</span> <span class="p">(</span><span class="mf">1.0.0</span><span class="p">)</span> <span class="o">=</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gina</span><span class="o">/</span><span class="n">devel</span><span class="o">/</span><span class="n">OctoPrint</span><span class="o">-</span><span class="n">HelloWorld</span><span class="o">/</span><span class="n">octoprint_helloworld</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div>
</div>
<p>Much better! You can override pretty much all of the metadata defined within <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> from within your Plugin itself –
take a look at <a class="reference internal" href="controlproperties.html#sec-plugins-controlproperties"><span class="std std-ref">the available control properties</span></a> for all available
overrides.</p>
<p>Following the README of the <a class="reference external" href="https://github.com/OctoPrint/OctoPrint-PluginSkeleton">Plugin Skeleton</a> you could now
already publish your plugin on Github and it would be directly installable by others using pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>(venv) $ pip install https://github.com/yourGithubName/OctoPrint-HelloWorld/archive/main.zip
</code></pre></div>
</div>
<p>But let’s add some more features instead.</p>
<h2 id="frontend-fun-how-to-add-functionality-to-octoprint-s-web-interface"><span id="sec-plugins-gettingstarted-templates"></span>Frontend fun: How to add functionality to OctoPrint’s web interface<a class="headerlink" href="#frontend-fun-how-to-add-functionality-to-octoprint-s-web-interface" title="Link to this heading">¶</a></h2>
<p>Outputting a log line upon server startup is all nice and well, but we want to greet not only the administrator of
our OctoPrint instance but actually everyone that opens OctoPrint in their browser. Therefore, we need to modify
OctoPrint’s web interface itself.</p>
<p>We can do this using the <code class="xref py py-class docutils literal notranslate"><span class="pre">TemplatePlugin</span></code> mixin. For now, let’s start with a little “Hello World!” in OctoPrint’s
navigation bar right at the top that links to the Wikipedia node about “Hello World” programs. For this we’ll first
add the <code class="xref py py-class docutils literal notranslate"><span class="pre">TemplatePlugin</span></code> to our <code class="docutils literal notranslate"><span class="pre">HelloWorldPlugin</span></code> class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">,</span>
<span class="hll">                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">TemplatePlugin</span><span class="p">):</span>
</span>    <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Next, we’ll create a sub folder <code class="docutils literal notranslate"><span class="pre">templates</span></code> underneath our <code class="docutils literal notranslate"><span class="pre">octoprint_helloworld</span></code> folder, and within that a file
<code class="docutils literal notranslate"><span class="pre">helloworld_navbar.jinja2</span></code> like so:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://en.wikipedia.org/wiki/Hello_world&quot;</span><span class="p">&gt;</span>Hello World!<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>Our plugin’s directory structure should now look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">octoprint_helloworld</span><span class="o">/</span>
    <span class="n">templates</span><span class="o">/</span>
        <span class="n">helloworld_navbar</span><span class="o">.</span><span class="n">jinja2</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="o">.</span><span class="n">editorconfig</span>
<span class="o">.</span><span class="n">gitignore</span>
<span class="n">babel</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">MANIFEST</span><span class="o">.</span><span class="ow">in</span>
<span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
<span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">Taskfile</span><span class="o">.</span><span class="n">yml</span>
</code></pre></div>
</div>
<p>Restart OctoPrint and open the web interface in your browser (make sure to clear your browser’s cache!).</p>
<img alt="Our &quot;Hello World&quot; navigation bar element in action" class="align-center" src="../_images/plugins_gettingstarted_helloworld_navbar.png" />
<p>Now look at that!</p>
<h2 id="settings-galore-how-to-make-parts-of-your-plugin-user-adjustable"><span id="sec-plugins-gettingstarted-settings"></span>Settings Galore: How to make parts of your plugin user adjustable<a class="headerlink" href="#settings-galore-how-to-make-parts-of-your-plugin-user-adjustable" title="Link to this heading">¶</a></h2>
<p>Remember that Wikipedia link we added to our little link in the navigation bar? It links to the English Wikipedia. But
what if we want to allow our users to adjust that according to their wishes, e.g. to link to the German language node
about “Hello World” programs instead?</p>
<p>To allow your users to customized the behaviour of your plugin you’ll need to implement the <a class="reference internal" href="mixins.html#octoprint.plugin.SettingsPlugin" title="octoprint.plugin.SettingsPlugin (Python class) — Bases: OctoPrintPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">SettingsPlugin</span></code></a>
mixin and override it’s <a class="reference internal" href="mixins.html#octoprint.plugin.SettingsPlugin.get_settings_defaults" title="octoprint.plugin.SettingsPlugin.get_settings_defaults (Python method) — Retrieves the plugin's default settings with which the plugin's settings manager will be initialized."><code class="xref py py-func docutils literal notranslate"><span class="pre">get_settings_defaults()</span></code></a> method. We’ll save the URL to
inject into the link under the key <code class="docutils literal notranslate"><span class="pre">url</span></code> in our plugin’s settings and set it to the old value by default. We’ll therefore
return just a single key in our default settings dictionary. To be able to quickly see if we’ve done that right we’ll
extend our little startup message to also log the current setting to the console. We can access that via <code class="docutils literal notranslate"><span class="pre">self._settings</span></code>,
which is a little settings manager OctoPrint conveniently injects into our Plugin when we include the <a class="reference internal" href="mixins.html#octoprint.plugin.SettingsPlugin" title="octoprint.plugin.SettingsPlugin (Python class) — Bases: OctoPrintPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">SettingsPlugin</span></code></a>
mixin.</p>
<p>Let’s take a look at how all that would look in our plugin’s <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">TemplatePlugin</span><span class="p">,</span>
<span class="hll">                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">SettingsPlugin</span><span class="p">):</span>
</span>    <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World! (more: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;url&quot;</span><span class="p">]))</span>
</span>
<span class="hll">    <span class="k">def</span><span class="w"> </span><span class="nf">get_settings_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://en.wikipedia.org/wiki/Hello_world&quot;</span><span class="p">)</span>
</span>
<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Restart OctoPrint. You should see something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>2015-01-30 11:41:06,058 - octoprint.plugins.helloworld - INFO - Hello World! (more: https://en.wikipedia.org/wiki/Hello_world)
</code></pre></div>
</div>
<p>So far so good. But how do we now get that value into our template? We have two options, the
static one using so called template variables and a dynamic one which retrieves that data from the backend and binds it
into the template using <a class="reference external" href="http://knockoutjs.com/documentation/introduction.html">Knockout data bindings</a>. First let’s
take a look at the static version using template variables. We already have the <a class="reference internal" href="mixins.html#octoprint.plugin.TemplatePlugin" title="octoprint.plugin.TemplatePlugin (Python class) — Bases: OctoPrintPlugin, ReloadNeedingPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplatePlugin</span></code></a>
mixin included in our plugin, we just need to override its method <a class="reference internal" href="mixins.html#octoprint.plugin.TemplatePlugin.get_template_vars" title="octoprint.plugin.TemplatePlugin.get_template_vars (Python method) — Defines additional template variables to include into the template renderer. Variable names will be prefixed with plugin_&lt;plugin identifier&gt;_."><code class="xref py py-func docutils literal notranslate"><span class="pre">get_template_vars()</span></code></a>
to add our URL as a template variable.</p>
<p>Adjust your plugin’s <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">TemplatePlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">SettingsPlugin</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World! (more: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;url&quot;</span><span class="p">]))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_settings_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://en.wikipedia.org/wiki/Hello_world&quot;</span><span class="p">)</span>

<span class="hll">    <span class="k">def</span><span class="w"> </span><span class="nf">get_template_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;url&quot;</span><span class="p">]))</span>
</span>
<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Also adjust your plugin’s <code class="docutils literal notranslate"><span class="pre">templates/helloworld_navbar.jinja2</span></code> like this:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ plugin_helloworld_url|escape }}&quot;</span><span class="p">&gt;</span>Hello World!<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>OctoPrint injects the template variables that your plugin defines prefixed with <code class="docutils literal notranslate"><span class="pre">plugin_&lt;plugin</span> <span class="pre">identifier&gt;_</span></code> into
the template renderer, so your <code class="docutils literal notranslate"><span class="pre">url</span></code> got turned into <code class="docutils literal notranslate"><span class="pre">plugin_helloworld_url</span></code> which you can now use as a simple
<a class="reference external" href="https://jinja.palletsprojects.com/templates#variables">Jinja2 Variable</a> in your plugin’s template.</p>
<p>Restart OctoPrint and shift-reload the page in your browser (to make sure you really get a fresh copy). The link should
still work and point to the URL we defined as default.</p>
<p>Let’s change the URL! Open up your OctoPrint instance’s <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file and add the following to it (if a <code class="docutils literal notranslate"><span class="pre">plugins</span></code>
section doesn’t yet exist in the file, create it):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># [...]</span>
<span class="nt">plugins</span><span class="p">:</span>
<span class="hll"><span class="w">  </span><span class="nt">helloworld</span><span class="p">:</span>
</span><span class="hll"><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://de.wikipedia.org/wiki/Hallo-Welt-Programm</span>
</span><span class="c1"># [...]</span>
</code></pre></div>
</div>
<p>Restart OctoPrint. Not only should the URL displayed in the log file have changed, but also the link should now (after
a proper shift-reload) point to the German Wikipedia node about “Hello World” programs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code>2015-01-30 11:47:18,634 - octoprint.plugins.helloworld - INFO - Hello World! (more: https://de.wikipedia.org/wiki/Hallo-Welt-Programm)
</code></pre></div>
</div>
<p>Nice! But not very user friendly. We don’t have any way yet to edit the URL from within OctoPrint and have to restart
the server and reload the page every time we want a value change to take effect. Let’s try adding a small settings dialog to our plugin, allowing us to edit the URL so that changes take effect immediately.</p>
<p>First of all, we’ll create the settings dialog. You might already have guessed that we’ll need another template for that.
So in your plugin’s <code class="docutils literal notranslate"><span class="pre">templates</span></code> folder create a new file <code class="docutils literal notranslate"><span class="pre">helloworld_settings.jinja2</span></code> and put the following content
into it:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">form</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-horizontal&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;control-group&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;control-label&quot;</span><span class="p">&gt;</span>{{ _(&#39;URL&#39;) }}<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;controls&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;input-block-level&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;value: settings.plugins.helloworld.url&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>Note how we access our plugin’s property via <code class="docutils literal notranslate"><span class="pre">settings.plugins.helloworld.url</span></code>. The <code class="docutils literal notranslate"><span class="pre">settings</span></code> observable is made
available in the <code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code> and holds the exact data structure returned from the server for all of
OctoPrint’s settings. Accessing plugin settings hence works by following the path under which they are stored in
OctoPrint’s internal settings data model (made public via the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>), <code class="docutils literal notranslate"><span class="pre">plugins.&lt;plugin</span> <span class="pre">identifier&gt;.&lt;configuration</span> <span class="pre">key&gt;</span></code>.
We’ll bind our own settings dialog to the existing <code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code>, so this will be the way we’ll access our
property.</p>
<p>Now adjust your <code class="docutils literal notranslate"><span class="pre">templates/helloworld_navbar.jinja2</span></code> file to use a <code class="docutils literal notranslate"><span class="pre">data-bind</span></code> attribute to set the value from the
settings view model into the <code class="docutils literal notranslate"><span class="pre">href</span></code> attribute of the link tag:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;javascript:void()&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;attr: {href: settings.settings.plugins.helloworld.url}&quot;</span><span class="p">&gt;</span>Hello World!<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>You might have noticed the quite ugly way to access our plugin’s <code class="docutils literal notranslate"><span class="pre">url</span></code> property here: <code class="docutils literal notranslate"><span class="pre">settings.settings.plugins.helloworld.url</span></code>.
The reason for this is that we’ll make our plugin use the existing <code class="docutils literal notranslate"><span class="pre">NavigationViewModel</span></code> which holds the
<code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code> as a property called <code class="docutils literal notranslate"><span class="pre">settings</span></code>. So to get to the <code class="docutils literal notranslate"><span class="pre">settings</span></code> property of the <code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code>
from the <code class="docutils literal notranslate"><span class="pre">NavigationViewModel</span></code>, we’ll need to first “switch” to the <code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code> using its property name. Hence
the ugly access string.</p>
<p>If you were now to restart OctoPrint and reload the web interface, you’ll get the settings dialog placed just fine
in OctoPrint’s settings, and the link would also still show up in the navigation bar, but both the input field of the
settings dialog as well as the link’s <code class="docutils literal notranslate"><span class="pre">href</span></code> attribute would not show our link. The reason for this is that OctoPrint
by default assumes that you’ll want to bind your own view models to your templates and hence “unbinds” the included
templates from the templates that are in place at the injected location already. In order to tell OctoPrint to please
don’t do this here (since we <em>do</em> want to use both <code class="docutils literal notranslate"><span class="pre">NavigationViewModel</span></code> and <code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code>), we’ll need to
override the default template configuration using the <code class="xref py py-class docutils literal notranslate"><span class="pre">get_template_configs</span></code> method. We’ll tell OctoPrint to use no custom bindings
for both our <code class="docutils literal notranslate"><span class="pre">navbar</span></code> and our <code class="docutils literal notranslate"><span class="pre">settings</span></code> plugin. We’ll also remove the override of <a class="reference internal" href="mixins.html#octoprint.plugin.TemplatePlugin.get_template_vars" title="octoprint.plugin.TemplatePlugin.get_template_vars (Python method) — Defines additional template variables to include into the template renderer. Variable names will be prefixed with plugin_&lt;plugin identifier&gt;_."><code class="xref py py-func docutils literal notranslate"><span class="pre">octoprint.plugin.TemplatePlugin.get_template_vars()</span></code></a>
again since we don’t use that anymore:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">TemplatePlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">SettingsPlugin</span><span class="p">):</span>
<span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World! (more: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;url&quot;</span><span class="p">]))</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_settings_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://en.wikipedia.org/wiki/Hello_world&quot;</span><span class="p">)</span>

<span class="hll"><span class="k">def</span><span class="w"> </span><span class="nf">get_template_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">    <span class="k">return</span> <span class="p">[</span>
</span><span class="hll">        <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;navbar&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span class="hll">        <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span class="hll">    <span class="p">]</span>
</span>
<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Restart OctoPrint and shift-reload your browser. Your link in the navigation bar should still point to the URL we
defined in <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> earlier. Open the “Settings” and click on the new “Hello World” entry that shows up under
“Plugins”.</p>
<img alt="Our &quot;Hello World&quot; navigation bar element in action" class="align-center" src="../_images/plugins_gettingstarted_helloworld_settings.png" />
<p>Nice! Edit the value, then click “Save”. Your link in the navigation bar should now have been updated as well.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>The way we’ve done our data binding and how OctoPrint currently works, your link’s target will update immediately
when you update the value in the settings dialog. Even if you click Cancel instead of Save, the change will still
be reflected in the UI but will be overwritten again by the stored data upon a reload. This is caused by OctoPrint
not storing a copy of the settings data while it is being edited, which might be changed in the future to
prevent this unexpected behaviour from occurring.</p>
</div>
<p>Congratulations, you’ve just made your Plugin configurable :)</p>
<h2 id="more-frontend-fun-adding-custom-javascript-to-your-frontend-components">More frontend fun: Adding custom javascript to your frontend components<a class="headerlink" href="#more-frontend-fun-adding-custom-javascript-to-your-frontend-components" title="Link to this heading">¶</a></h2>
<p>In the previous section we set that <code class="docutils literal notranslate"><span class="pre">custom_bindings</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">False</span></code> since we wanted OctoPrint to bind the
<code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code> to our settings dialog and the <code class="docutils literal notranslate"><span class="pre">NavigationViewModel</span></code> to our entry in the nav bar.</p>
<p>But what if we want to define our own, with more functionality that is already available? Let’s take a look. We’ll now
add an additional UI component to our OctoPrint interface, a custom tab. It will act as a little internal web browser,
showing the website behind the URL from the settings in an IFrame but also allowing the user to load a different URL
without having to change the settings.</p>
<p>First let us create the Jinja2 template for our tab. In your plugin’s <code class="docutils literal notranslate"><span class="pre">templates</span></code> folder create a new file
<code class="docutils literal notranslate"><span class="pre">helloworld_tab.jinja2</span></code> like so:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;input-append&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;input-xxlarge&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;value: newUrl&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;click: goToUrl&quot;</span><span class="p">&gt;</span>{{ _(&#39;Go&#39;) }}<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


<span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;attr: {src: currentUrl}&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: 100%; height: 600px; border: 1px solid #808080&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>Then we create a new folder in your plugin’s root called <code class="docutils literal notranslate"><span class="pre">static</span></code> and within that folder another folder by the name of
<code class="docutils literal notranslate"><span class="pre">js</span></code>. Finally, within that folder create a file <code class="docutils literal notranslate"><span class="pre">helloworld.js</span></code>. Our plugin’s folder structure should now
look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">octoprint_helloworld</span><span class="o">/</span>
    <span class="n">static</span><span class="o">/</span>
        <span class="n">js</span><span class="o">/</span>
            <span class="n">helloworld</span><span class="o">.</span><span class="n">js</span>
    <span class="n">templates</span><span class="o">/</span>
        <span class="n">helloworld_navbar</span><span class="o">.</span><span class="n">jinja2</span>
        <span class="n">helloworld_settings</span><span class="o">.</span><span class="n">jinja2</span>
        <span class="n">helloworld_tab</span><span class="o">.</span><span class="n">jinja2</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="o">.</span><span class="n">editorconfig</span>
<span class="o">.</span><span class="n">gitignore</span>
<span class="n">babel</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">MANIFEST</span><span class="o">.</span><span class="ow">in</span>
<span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
<span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">Taskfile</span><span class="o">.</span><span class="n">yml</span>
</code></pre></div>
</div>
<p>We need to tell OctoPrint about this new static asset so that it will properly inject it into the page. For this we
just need to subclass <a class="reference internal" href="mixins.html#octoprint.plugin.AssetPlugin" title="octoprint.plugin.AssetPlugin (Python class) — Bases: OctoPrintPlugin, RestartNeedingPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssetPlugin</span></code></a> and override its method <a class="reference internal" href="mixins.html#octoprint.plugin.AssetPlugin.get_assets" title="octoprint.plugin.AssetPlugin.get_assets (Python method) — Defines the static assets the plugin offers. The following asset types are recognized and automatically imported at the appropriate places to be available:"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_assets()</span></code></a>
like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">TemplatePlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">SettingsPlugin</span><span class="p">,</span>
<span class="hll">                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">AssetPlugin</span><span class="p">):</span>
</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World! (more: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;url&quot;</span><span class="p">]))</span>

 <span class="k">def</span><span class="w"> </span><span class="nf">get_settings_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://en.wikipedia.org/wiki/Hello_world&quot;</span><span class="p">)</span>

 <span class="k">def</span><span class="w"> </span><span class="nf">get_template_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="p">[</span>
         <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;navbar&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
         <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
     <span class="p">]</span>

<span class="hll"> <span class="k">def</span><span class="w"> </span><span class="nf">get_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">     <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
</span><span class="hll">         <span class="n">js</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;js/helloworld.js&quot;</span><span class="p">]</span>
</span><span class="hll">     <span class="p">)</span>
</span>
<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Note how we did not add another entry to the return value of <a class="reference internal" href="mixins.html#octoprint.plugin.TemplatePlugin.get_template_configs" title="octoprint.plugin.TemplatePlugin.get_template_configs (Python method) — Allows configuration of injected navbar, sidebar, tab and settings templates (and also additional templates of types specified by plugins through the octoprint.ui.web.templatetypes hook). Should be a list containing one configuration object per template to inject. Each configuration object is represented by a dictionary which may contain the following keys:"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_template_configs()</span></code></a>.
Remember how we only added those since we wanted OctoPrint to use existing bindings on our navigation bar and settings
menu entries? We don’t want this time, and we named our tab template such that OctoPrint will pick it up automatically
so we don’t have to do anything here.</p>
<p>Then we’ll create our custom <a class="reference external" href="http://knockoutjs.com/documentation/introduction.html">Knockout</a> view model in <code class="docutils literal notranslate"><span class="pre">helloworld.js</span></code>
like so:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><code><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">HelloWorldViewModel</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>

<span class="w">        </span><span class="nx">self</span><span class="p">.</span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parameters</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// this will hold the URL currently displayed by the iframe</span>
<span class="w">        </span><span class="nx">self</span><span class="p">.</span><span class="nx">currentUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// this will hold the URL entered in the text field</span>
<span class="w">        </span><span class="nx">self</span><span class="p">.</span><span class="nx">newUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// this will be called when the user clicks the &quot;Go&quot; button and set the iframe&#39;s URL to</span>
<span class="w">        </span><span class="c1">// the entered URL</span>
<span class="w">        </span><span class="nx">self</span><span class="p">.</span><span class="nx">goToUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">self</span><span class="p">.</span><span class="nx">currentUrl</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">newUrl</span><span class="p">());</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="c1">// This will get called before the HelloWorldViewModel gets bound to the DOM, but after its</span>
<span class="w">        </span><span class="c1">// dependencies have already been initialized. It is especially guaranteed that this method</span>
<span class="w">        </span><span class="c1">// gets called _after_ the settings have been retrieved from the OctoPrint backend and thus</span>
<span class="w">        </span><span class="c1">// the SettingsViewModel been properly populated.</span>
<span class="w">        </span><span class="nx">self</span><span class="p">.</span><span class="nx">onBeforeBinding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">self</span><span class="p">.</span><span class="nx">newUrl</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">helloworld</span><span class="p">.</span><span class="nx">url</span><span class="p">());</span>
<span class="w">            </span><span class="nx">self</span><span class="p">.</span><span class="nx">goToUrl</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// This is how our plugin registers itself with the application, by adding some configuration</span>
<span class="w">    </span><span class="c1">// information to the global variable OCTOPRINT_VIEWMODELS</span>
<span class="hll"><span class="w">    </span><span class="nx">OCTOPRINT_VIEWMODELS</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
</span><span class="hll"><span class="w">        </span><span class="c1">// This is the constructor to call for instantiating the plugin</span>
</span><span class="hll"><span class="w">        </span><span class="nx">HelloWorldViewModel</span><span class="p">,</span>
</span><span class="hll">
</span><span class="hll"><span class="w">        </span><span class="c1">// This is a list of dependencies to inject into the plugin, the order which you request</span>
</span><span class="hll"><span class="w">        </span><span class="c1">// here is the order in which the dependencies will be injected into your view model upon</span>
</span><span class="hll"><span class="w">        </span><span class="c1">// instantiation via the parameters argument</span>
</span><span class="hll"><span class="w">        </span><span class="p">[</span><span class="s2">&quot;settingsViewModel&quot;</span><span class="p">],</span>
</span><span class="hll">
</span><span class="hll"><span class="w">        </span><span class="c1">// Finally, this is the list of selectors for all elements we want this view model to be bound to.</span>
</span><span class="hll"><span class="w">        </span><span class="p">[</span><span class="s2">&quot;#tab_plugin_helloworld&quot;</span><span class="p">]</span>
</span><span class="hll"><span class="w">    </span><span class="p">]);</span>
</span><span class="p">});</span>
</code></pre></div>
</div>
<p>Take a close look at lines 31 to 42. This is how our plugin tells OctoPrint about our new view model, how to
instantiate it, which dependencies to inject and to which elements in the final page to bind. Since we want to access
the URL from the settings of our plugin, we’ll have OctoPrint inject the <code class="docutils literal notranslate"><span class="pre">SettingsViewModel</span></code> into our own view model,
which is registered within OctoPrint under the name <code class="docutils literal notranslate"><span class="pre">settingsViewModel</span></code>. We’ll only bind to our custom tab
for now, which OctoPrint will make available in a container with the id <code class="docutils literal notranslate"><span class="pre">tab_plugin_helloworld</span></code> (unless otherwise
configured).</p>
<p>Our view model defines two observables: <code class="docutils literal notranslate"><span class="pre">newUrl</span></code>, which we bound to the input field in our template, and <code class="docutils literal notranslate"><span class="pre">currentUrl</span></code>
which we bound to the <code class="docutils literal notranslate"><span class="pre">src</span></code> attribute of the “browser iframe” in our template. There’s also a function <code class="docutils literal notranslate"><span class="pre">goToUrl</span></code>
which we bound to the click event of the “Go” button in our template.</p>
<p>Restart OctoPrint and shift-reload the browser. You should see a shiny new “Hello World” tab right at the end of the
tab bar. Click on it!</p>
<img alt="Our &quot;Hello World&quot; tab in action" class="align-center" src="../_images/plugins_gettingstarted_helloworld_tab.png" />
<p>The desktop version of that article looks a bit squished in there, so let’s enter <code class="docutils literal notranslate"><span class="pre">https://de.m.wikipedia.org/wiki/Hallo-Welt-Programm</span></code>
into the input field and click the “Go” button. The page inside the iframe should be replaced with the mobile version
of the same article.</p>
<h2 id="style-matters-injecting-custom-css-into-the-page">Style matters: Injecting custom CSS into the page<a class="headerlink" href="#style-matters-injecting-custom-css-into-the-page" title="Link to this heading">¶</a></h2>
<p>So it appears that this stuff is working great already. Only one thing is a bit ugly, let’s take another look at
our <code class="docutils literal notranslate"><span class="pre">helloworld_tab.jinja2</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;input-append&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;input-xxlarge&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;value: newUrl&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;click: goToUrl&quot;</span><span class="p">&gt;</span>{{ _(&#39;Go&#39;) }}<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="hll"><span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;attr: {src: currentUrl}&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: 100%; height: 600px; border: 1px solid #808080&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
<p>We hardcoded some <code class="docutils literal notranslate"><span class="pre">style</span></code> on our <code class="docutils literal notranslate"><span class="pre">iframe</span></code> in line 6, to make it look a bit better. It would be nicer if that was actually
located inside a stylesheet instead of directly inside our HTML template. Of course that’s no problem, we’ll just
add a CSS file to our plugin’s provided static assets.</p>
<p>First we’ll create a new folder within our plugin’s <code class="docutils literal notranslate"><span class="pre">static</span></code> folder called <code class="docutils literal notranslate"><span class="pre">css</span></code> and within that folders a file
<code class="docutils literal notranslate"><span class="pre">helloworld.css</span></code>. Our plugin’s file structure should now look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">octoprint_helloworld</span><span class="o">/</span>
    <span class="n">static</span><span class="o">/</span>
        <span class="n">css</span><span class="o">/</span>
            <span class="n">helloworld</span><span class="o">.</span><span class="n">css</span>
        <span class="n">js</span><span class="o">/</span>
            <span class="n">helloworld</span><span class="o">.</span><span class="n">js</span>
    <span class="n">templates</span><span class="o">/</span>
        <span class="n">helloworld_navbar</span><span class="o">.</span><span class="n">jinja2</span>
        <span class="n">helloworld_settings</span><span class="o">.</span><span class="n">jinja2</span>
        <span class="n">helloworld_tab</span><span class="o">.</span><span class="n">jinja2</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="o">.</span><span class="n">editorconfig</span>
<span class="o">.</span><span class="n">gitignore</span>
<span class="n">babel</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">MANIFEST</span><span class="o">.</span><span class="ow">in</span>
<span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
<span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">Taskfile</span><span class="o">.</span><span class="n">yml</span>
</code></pre></div>
</div>
<p>Put something like the following into <code class="docutils literal notranslate"><span class="pre">helloworld.css</span></code>:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><code><span class="p">#</span><span class="nn">tab_plugin_helloworld</span><span class="w"> </span><span class="nt">iframe</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#808080</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
<p>Don’t forget to remove the <code class="docutils literal notranslate"><span class="pre">style</span></code> attribute from the <code class="docutils literal notranslate"><span class="pre">iframe</span></code> tag in <code class="docutils literal notranslate"><span class="pre">helloworld_tab.jinja2</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;input-append&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;input-xxlarge&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;value: newUrl&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary&quot;</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;click: goToUrl&quot;</span><span class="p">&gt;</span>{{ _(&#39;Go&#39;) }}<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="hll"><span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">data-bind</span><span class="o">=</span><span class="s">&quot;attr: {src: currentUrl}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
<p>Then adjust our plugin’s <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> so that the <a class="reference internal" href="mixins.html#octoprint.plugin.AssetPlugin.get_assets" title="octoprint.plugin.AssetPlugin.get_assets (Python method) — Defines the static assets the plugin offers. The following asset types are recognized and automatically imported at the appropriate places to be available:"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_assets()</span></code></a> method returns
a reference to our CSS file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">TemplatePlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">SettingsPlugin</span><span class="p">,</span>
                       <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">AssetPlugin</span><span class="p">):</span>

 <span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World! (more: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;url&quot;</span><span class="p">]))</span>

 <span class="k">def</span><span class="w"> </span><span class="nf">get_settings_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://en.wikipedia.org/wiki/Hello_world&quot;</span><span class="p">)</span>

 <span class="k">def</span><span class="w"> </span><span class="nf">get_template_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="p">[</span>
         <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;navbar&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
         <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
     <span class="p">]</span>

 <span class="k">def</span><span class="w"> </span><span class="nf">get_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
         <span class="n">js</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;js/helloworld.js&quot;</span><span class="p">],</span>
<span class="hll">         <span class="n">css</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;css/helloworld.css&quot;</span><span class="p">]</span>
</span>     <span class="p">)</span>

<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>OctoPrint by default bundles all CSS, JavaScript and LESS files to reduce the amount of requests necessary to fully
load the page. But in order to fully be able to see how what we just did changes how our plugin interacts with OctoPrint
we want to disable that behaviour for now. Open up OctoPrint’s <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> and disable bundling of the webassets:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1"># [...]</span>
<span class="hll"><span class="w">    </span><span class="nt">devel</span><span class="p">:</span>
</span><span class="hll"><span class="w">      </span><span class="nt">webassets</span><span class="p">:</span>
</span><span class="hll"><span class="w">        </span><span class="nt">bundle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span class="w">    </span><span class="c1"># [...]</span>
</code></pre></div>
</div>
<p>Restart OctoPrint, shift-reload your browser and take a look. Everything should still look like before, but now
OctoPrint included our stylesheet and the style information for the <code class="docutils literal notranslate"><span class="pre">iframe</span></code> is taken from that instead of
hardcoded in our template. Way better!</p>
<p>Now, if you had something more complicated than just the couple of line of CSS we used here, you might want to use
something like LESS for generating your CSS from. If you use <a class="reference external" href="http://lesscss.org/">LESS</a>, which is what OctoPrint
uses for that purpose, you can even put OctoPrint into a mode where it directly uses your LESS files instead of the
generated CSS files (and compiles them on the fly in your browser using <a class="reference external" href="http://lesscss.org/#client-side-usage">lessjs</a>),
which makes development so much easier. Let’s try that, so you know how it works for future bigger projects.</p>
<p>Add another folder to our <code class="docutils literal notranslate"><span class="pre">static</span></code> folder called <code class="docutils literal notranslate"><span class="pre">less</span></code> and within that create a file <code class="docutils literal notranslate"><span class="pre">helloworld.less</span></code>. Put
into that the same content as into our CSS file. Compile that LESS file to CSS <a class="footnote-reference brackets" href="#f2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, overwriting our old <code class="docutils literal notranslate"><span class="pre">helloworld.css</span></code>
in the process. The folder structure of our plugin should now look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">octoprint_helloworld</span><span class="o">/</span>
    <span class="n">static</span><span class="o">/</span>
        <span class="n">css</span><span class="o">/</span>
            <span class="n">helloworld</span><span class="o">.</span><span class="n">css</span>
        <span class="n">js</span><span class="o">/</span>
            <span class="n">helloworld</span><span class="o">.</span><span class="n">js</span>
        <span class="n">less</span><span class="o">/</span>
            <span class="n">helloworld</span><span class="o">.</span><span class="n">less</span>
    <span class="n">templates</span><span class="o">/</span>
        <span class="n">helloworld_navbar</span><span class="o">.</span><span class="n">jinja2</span>
        <span class="n">helloworld_settings</span><span class="o">.</span><span class="n">jinja2</span>
        <span class="n">helloworld_tab</span><span class="o">.</span><span class="n">jinja2</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="o">.</span><span class="n">editorconfig</span>
<span class="o">.</span><span class="n">gitignore</span>
<span class="n">babel</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">MANIFEST</span><span class="o">.</span><span class="ow">in</span>
<span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
<span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">Taskfile</span><span class="o">.</span><span class="n">yml</span>
</code></pre></div>
</div>
<p>Then adjust our returned assets to include our LESS file as well:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">octoprint.plugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPlugin</span><span class="p">(</span><span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">StartupPlugin</span><span class="p">,</span>
                      <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">TemplatePlugin</span><span class="p">,</span>
                      <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">SettingsPlugin</span><span class="p">,</span>
                      <span class="n">octoprint</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">AssetPlugin</span><span class="p">):</span>

<span class="k">def</span><span class="w"> </span><span class="nf">on_after_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World! (more: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;url&quot;</span><span class="p">]))</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_settings_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://en.wikipedia.org/wiki/Hello_world&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_template_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;navbar&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="n">custom_bindings</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">js</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;js/helloworld.js&quot;</span><span class="p">],</span>
        <span class="n">css</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;css/helloworld.css&quot;</span><span class="p">],</span>
<span class="hll">        <span class="n">less</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;less/helloworld.less&quot;</span><span class="p">]</span>
</span>    <span class="p">)</span>

<span class="n">__plugin_name__</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="n">__plugin_pythoncompat__</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;4&quot;</span>
<span class="n">__plugin_implementation__</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">()</span>
</code></pre></div>
</div>
<p>and enable LESS mode by adjusting one of OctoPrint’s <code class="docutils literal notranslate"><span class="pre">devel</span></code> flags via the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># [...]</span>
<span class="nt">devel</span><span class="p">:</span>
<span class="hll"><span class="w">  </span><span class="nt">stylesheet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">less</span>
</span><span class="w">  </span><span class="nt">webassets</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bundle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="c1"># [...]</span>
</code></pre></div>
</div>
<p>Restart OctoPrint and shift-reload. Your “Hello World” tab should still look like before. Take a look at the site’s
source code. In the <code class="docutils literal notranslate"><span class="pre">head</span></code> section of the page you’ll see that instead of your <code class="docutils literal notranslate"><span class="pre">helloworld.css</span></code> OctoPrint now
embedded the <code class="docutils literal notranslate"><span class="pre">helloworld.less</span></code> file instead:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- [...] --&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/static/less/octoprint.less&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet/less&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;screen&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- [...] --&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/plugin/helloworld/static/less/helloworld.less&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet/less&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;screen&quot;</span><span class="p">&gt;</span>
</span>    <span class="cm">&lt;!-- [...] --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/static/js/lib/less.min.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- [...] --&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>Switch your config back to CSS mode by either removing the <code class="docutils literal notranslate"><span class="pre">stylesheet</span></code> setting we just added to <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> or
setting it to <code class="docutils literal notranslate"><span class="pre">css</span></code>, e.g.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># [...]</span>
<span class="nt">devel</span><span class="p">:</span>
<span class="hll"><span class="w">  </span><span class="nt">stylesheet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">css</span>
</span><span class="w">  </span><span class="nt">webassets</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bundle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="c1"># [...]</span>
</code></pre></div>
</div>
<p>Restart and shift-reload and take another look at the <code class="docutils literal notranslate"><span class="pre">head</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- [...] --&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/static/css/octoprint.css&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;screen&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- [...] --&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/plugin/helloworld/static/css/helloworld.css&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;screen&quot;</span><span class="p">&gt;</span>
</span>    <span class="cm">&lt;!-- [...] --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/static/js/lib/less.min.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- [...] --&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>Now the CSS file is linked and no trace of the LESS links is left in the source. This should help to speed up your development
tremendously when you have to work with complex stylesheets, just don’t forgot to check the generated CSS file in with
the rest of your plugin or people will miss it when trying to run your plugin!</p>
<p>Remember when I mentioned that OctoPrint by default bundles all our assets for us? We adjusted our <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> to
stop it from doing that at the start of this section, we should switch this back now:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># [...]</span>
<span class="nt">devel</span><span class="p">:</span>
<span class="w">  </span><span class="nt">stylesheet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">css</span>
<span class="c1"># [...]</span>
</code></pre></div>
</div>
<p>Just out of curiosity, restart, shift-reload and take a final look at the <code class="docutils literal notranslate"><span class="pre">head</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- [...] --&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/static/webassets/packed.css?85a134&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;screen&quot;</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/static/webassets/packed.less?85a134&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet/less&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;screen&quot;</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/static/js/lib/less.min.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span>    <span class="cm">&lt;!-- [...] --&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>Way more compact, isn’t it?</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>If your plugin only provides CSS files, OctoPrint will detect this when switched to LESS mode and include your
CSS files instead of any non-existing LESS files. So you don’t really <em>have</em> to use LESS if you don’t want, but
as soon as you need it just switch over.</p>
<p>The same thing works the other way around too by the way. If your plugin only provides LESS files, OctoPrint will link to
those, lessjs will take care of the compilation. Please keep in mind though that also providing CSS files is the
cleaner way.</p>
</div>
<h2 id="where-do-we-go-from-here">Where do we go from here?<a class="headerlink" href="#where-do-we-go-from-here" title="Link to this heading">¶</a></h2>
<p>You’ve now seen how easy it is to add functionality to OctoPrint with this little tutorial. You can find the full
source code of the little Hello World plugin we built together here <a class="reference external" href="https://github.com/OctoPrint/Plugin-Examples/tree/master/helloworld">on Github</a>.</p>
<p>But I want to invite you to dive deeper into OctoPrint’s plugin system. To get an idea of all the other various plugin types
you haven’t seen yet, <a class="reference internal" href="mixins.html#sec-plugins-mixins"><span class="std std-ref">take a look at the available plugin mixins</span></a>.</p>
<p>For some insight on how to create plugins that react to various events within OctoPrint,
<a class="reference external" href="https://github.com/OctoPrint/OctoPrint-Growl">the Growl Plugin</a> might be a good example to learn from. For how to
add support for a slicer, the <a class="reference external" href="https://github.com/OctoPrint/OctoPrint-CuraEngineLegacy">CuraEngine Legacy plugin</a>
might give some hints. For extending OctoPrint’s interface, the <a class="reference external" href="https://github.com/imrahil/OctoPrint-NavbarTemp">NavbarTemp plugin</a>
might show what’s possible with a few lines of code already. Finally, just take a look at the
<a class="reference external" href="http://plugins.octoprint.org">official Plugin Repository</a> if you are looking for examples.</p>
<div class="seealso admonition">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference external" href="https://jinja.palletsprojects.com/templates">Jinja Template Designer Documentation</a></dt><dd><p>Jinja’s Template Designer Documentation describes the syntax and semantics of the template language used
by OctoPrint’s frontend.</p>
</dd>
</dl>
</div>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Instead of the <code class="docutils literal notranslate"><span class="pre">octoprint</span> <span class="pre">dev</span> <span class="pre">plugin:new</span></code> you could also have manually called cookiecutter with the
template’s repository URL shortcut: <code class="docutils literal notranslate"><span class="pre">cookiecutter</span> <span class="pre">gh:OctoPrint/cookiecutter-octoprint-plugin</span></code>. The
<code class="docutils literal notranslate"><span class="pre">devel:newplugin</span></code> command already does this for you, makes sure cookiecutter always uses a fresh
checkout without prompting you for it and also allows to pre-specify a bunch of settings (like the
plugin’s identifier) directly from the command line. Take a look at <code class="docutils literal notranslate"><span class="pre">octoprint</span> <span class="pre">dev</span> <span class="pre">plugin:new</span> <span class="pre">--help</span></code>
for the usage details.</p>
</aside>
<aside class="footnote brackets" id="f2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Refer to the <a class="reference external" href="http://lesscss.org/#using-less">LESS documentation</a> on how to do that. If you are developing
your plugin under Windows you might also want to give <a class="reference external" href="http://winless.org/">WinLESS</a> a look which will run
in the background and keep your CSS files up to date with your various project’s LESS files automatically.</p>
</aside>
</aside>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="viewmodels.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Viewmodels">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Viewmodels
              </div>
            </div>
          </a>
        
        
          
          <a href="distributing.html" class="md-footer__link md-footer__link--next" aria-label="Next: Distributing your plugin">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Distributing your plugin
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2013-2025, OctoPrint.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    8.2.3.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "navigation.footer", "search.share", "search.suggest", "toc.follow", "toc.sticky", "content.tabs.link", "content.code.copy", "content.tooltips", "announce.dismiss"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike", "staticVersions": null, "versionPath": "../versions.json"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.32136f45f91ae6956.min.js?v=a7a9472a"></script>
        <script data-domain="docs.octoprint.org" defer="defer" src="https://plausible.octoprint.org/js/plausible.js"></script>
    
  </body>
</html>