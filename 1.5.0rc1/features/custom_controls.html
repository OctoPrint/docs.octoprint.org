

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Custom Controls &mdash; OctoPrint 1.5.0rc1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="https://unpkg.com/mermaid@8.4.8/dist/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GCODE Scripts" href="gcode_scripts.html" />
    <link rel="prev" title="Access Control" href="accesscontrol.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> OctoPrint
          

          
          </a>

          
            
            
              <div class="version">
                1.5.0rc1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="accesscontrol.html">Access Control</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Custom Controls</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#types">Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#containers">Containers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#controls">Controls</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parameterized-gcode-script">Parameterized GCODE Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gcode_scripts.html">GCODE Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="action_commands.html">Action Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="atcommands.html">&#64; Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="safemode.html">Safe mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bundledplugins/index.html">Bundled Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events/index.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Developing Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Internal Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jsclientlib/index.html">JavaScript Client Library</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OctoPrint</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">


  <p style="padding: 10px;margin: 0 0 10px 0;border-radius: 2px;letter-spacing: 1px;font-size: 13px;color: white;text-align: center;background: #3a87ad;background-image: none;background-size: auto;background-size: 28px 28px;background-image: linear-gradient( -45deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent );">
    <strong>Note:</strong>
    These are not the docs of the latest released version. Those can be found <a href="https://docs.octoprint.org/en/1.4.2" style="color: white;text-decoration: underline">here</a>.
  </p>


  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Features</a> &raquo;</li>
        
      <li>Custom Controls</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/features/custom_controls.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="custom-controls">
<span id="sec-features-custom-controls"></span><h1><a class="toc-backref" href="#id4">Custom Controls</a><a class="headerlink" href="#custom-controls" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#custom-controls" id="id4">Custom Controls</a></p>
<ul>
<li><p><a class="reference internal" href="#types" id="id5">Types</a></p>
<ul>
<li><p><a class="reference internal" href="#containers" id="id6">Containers</a></p></li>
<li><p><a class="reference internal" href="#controls" id="id7">Controls</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#examples" id="id8">Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#parameterized-gcode-script" id="id9">Parameterized GCODE Script</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>OctoPrint allows you to add custom controls to the “Control” tab of its interface. Control types reach from simple
buttons which trigger sending of one or more lines of GCODE to the printer over more complex controls allowing
parameterization of these commands with values entered by the user to full blown GCODE script templates backed by
<a class="reference external" href="http://jinja.pocoo.org/">Jinja2</a>.</p>
<p>Custom controls are configured within <a class="reference internal" href="../configuration/config_yaml.html#sec-configuration-config-yaml"><span class="std std-ref">config.yaml</span></a> <a class="footnote-reference brackets" href="#f1" id="id1">1</a>  in a <code class="docutils literal notranslate"><span class="pre">controls</span></code> section which
basically represents a hierarchical structure of all configured custom controls of various types.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To make sure that your <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> stays valid when adding custom controls, don’t hesitate to take a look at the
<a class="reference internal" href="../configuration/yaml.html#sec-configuration-yaml"><span class="std std-ref">YAML Primer</span></a>.</p>
</div>
<p>The following example defines a control for enabling the cooling fan with a variable speed defined by the user
(default 255 and selectable through a slider UI element) and a control for disabling the fan, all within a section named
“Fan”, two example controls with multiple commands in a section “Example for multiple commands”, a command with printer
feedback evaluation for the result of the M114 “Get Position” gcode inside a section named “Reporting” and finally
a GCODE script including user input.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controls</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Fan</span>
    <span class="nt">layout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">horizontal</span>
    <span class="nt">children</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Enable Fan</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">M106 S%(speed)s</span>
      <span class="nt">input</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Speed (0-255)</span>
        <span class="nt">parameter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">speed</span>
        <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">255</span>
        <span class="nt">slider</span><span class="p">:</span>
          <span class="nt">min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
          <span class="nt">max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">255</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Disable Fan</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">M107</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Example for multiple commands</span>
    <span class="nt">children</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Move X (static)</span>
      <span class="nt">confirm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">You are about to move the X axis right by 10mm with 3000mm/s.</span>
      <span class="nt">commands</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">G91</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">G1 X10 F3000</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">G90</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Move X (parametric)</span>
      <span class="nt">commands</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">G91</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">G1 X%(distance)s F%(speed)s</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">G90</span>
      <span class="nt">input</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Distance</span>
        <span class="nt">parameter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">distance</span>
      <span class="p p-Indicator">-</span> <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3000</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Speed</span>
        <span class="nt">parameter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">speed</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Reporting</span>
    <span class="nt">children</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Get Position</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">M114</span>
      <span class="nt">regex</span><span class="p">:</span> <span class="s">&quot;X:([-+]?[0-9.]+)</span><span class="nv"> </span><span class="s">Y:([-+]?[0-9.]+)</span><span class="nv"> </span><span class="s">Z:([-+]?[0-9.]+)</span><span class="nv"> </span><span class="s">E:([-+]?[0-9.]+)&quot;</span>
      <span class="nt">template</span><span class="p">:</span> <span class="s">&quot;Position:</span><span class="nv"> </span><span class="s">X={0},</span><span class="nv"> </span><span class="s">Y={1},</span><span class="nv"> </span><span class="s">Z={2},</span><span class="nv"> </span><span class="s">E={3}&quot;</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Fun stuff</span>
    <span class="nt">children</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Dance</span>
      <span class="nt">script</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">custom/dance.gco</span>
      <span class="nt">input</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Go arounds</span>
        <span class="nt">parameter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">repetitions</span>
        <span class="nt">slider</span><span class="p">:</span>
          <span class="nt">max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
          <span class="nt">min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
          <span class="nt">step</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
<p>Adding this to <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>, restarting the OctoPrint server and switching to the “Control” tab within its
interface yields the visual representation in <a class="reference internal" href="#fig-configuration-customcontrols-example"><span class="std std-numref">Fig. 1</span></a>.</p>
<div class="figure align-center" id="id2">
<span id="fig-configuration-customcontrols-example"></span><img alt="The rendered output created through the example configuration" src="../_images/features-custom_controls-example.png" />
<p class="caption"><span class="caption-number">Fig. 1 </span><span class="caption-text">The rendered output created through the example configuration</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>As you can see you have two basic types of control definitions here: controls that actually do something (providing a
button that sends one or more commands to the printer when clicked, displaying output received from the printer) and
controls that just serve as <em>container</em> for other controls, the latter being identified by having a <code class="docutils literal notranslate"><span class="pre">children</span></code>
attribute wrapping more controls.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Take a look at the <a class="reference external" href="http://plugins.octoprint.org/plugins/customControl/">Custom Control Editor plugin</a>
which allows you configuring your Custom Controls through OctoPrint’s
settings interface without the need to manually edit the configuration
file.</p>
</div>
<div class="section" id="types">
<span id="sec-features-custom-controls-types"></span><h2><a class="toc-backref" href="#id5">Types</a><a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h2>
<p>Let’s take a closer look at the possible attributes that are available for both basic types.</p>
<div class="section" id="containers">
<span id="sec-features-custom-controls-types-containers"></span><h3><a class="toc-backref" href="#id6">Containers</a><a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Attribute</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">children</span></code></p></td>
<td><p>A list of children controls or containers contained within this container</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>(Optional) A name to display above the container, basically a section header</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">layout</span></code></p></td>
<td><p>(Optional) The layout to use for laying out the contained children, either from top to bottom (<code class="docutils literal notranslate"><span class="pre">vertical</span></code>) or
from left to right (<code class="docutils literal notranslate"><span class="pre">horizontal</span></code>). Defaults to a <code class="docutils literal notranslate"><span class="pre">vertical</span></code> layout.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="controls">
<span id="sec-features-custom-controls-types-controls"></span><h3><a class="toc-backref" href="#id7">Controls</a><a class="headerlink" href="#controls" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Attribute</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>The name of the control, will be displayed either on the button if it’s a control sending a command or as a label
for controls which only display output.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">command</span></code></p></td>
<td><p>(Optional) A single GCODE command to send to the printer. Will be rendered as a button which sends the command to
the printer upon click. The button text will be the value of the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute. Mutually exclusive with
<code class="docutils literal notranslate"><span class="pre">commands</span></code> and <code class="docutils literal notranslate"><span class="pre">script</span></code>. The rendered button be disabled if the printer is currently offline or printing or
alternatively if the requirements defined via the <code class="docutils literal notranslate"><span class="pre">enabled</span></code> attribute are not met.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">commands</span></code></p></td>
<td><p>(Optional) A list of GCODE commands to send to the printer. Will be rendered as a button which sends the commands
to the printer upon click. The button text will be the value of the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute. Mutually exclusive with
<code class="docutils literal notranslate"><span class="pre">command</span></code> and <code class="docutils literal notranslate"><span class="pre">script</span></code>. The rendered button will be disabled if the printer is currently offline or printing
or alternatively if the requirements defined via the <code class="docutils literal notranslate"><span class="pre">enabled</span></code> attribute are not met.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">script</span></code></p></td>
<td><p>(Optional) The name of a full blown <a class="reference internal" href="gcode_scripts.html#sec-features-gcode-scripts"><span class="std std-ref">GCODE script</span></a> to send to the printer.
Will be rendered as a button which sends the script to the printer upon click. The button text will be the value
of the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute. Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">command</span></code> and <code class="docutils literal notranslate"><span class="pre">commands</span></code>. The rendered button will be
disabled if the printer is currently offline or printing or alternatively if the requirements defined via the
<code class="docutils literal notranslate"><span class="pre">enabled</span></code> attribute are not met.</p>
<p>Values of input parameters will be available in the template context under the <code class="docutils literal notranslate"><span class="pre">parameter</span></code> variable (e.g.
an input parameter <code class="docutils literal notranslate"><span class="pre">speed</span></code> will be available in the script template as <code class="docutils literal notranslate"><span class="pre">parameter.speed</span></code>). On top of that all
other variables defined in the <a class="reference internal" href="gcode_scripts.html#sec-features-gcode-scripts-context"><span class="std std-ref">GCODE template context</span></a> will be available.</p>
<p><a class="reference internal" href="#sec-features-custom-controls-examples-gcode-script"><span class="std std-ref">See below for an example</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">javascript</span></code></p></td>
<td><p>(Optional) A JavaScript snippet to be executed when the button rendered for <code class="docutils literal notranslate"><span class="pre">command</span></code> or <code class="docutils literal notranslate"><span class="pre">commands</span></code> is
clicked. This allows to override the direct sending of the command or commands to the printer with more
sophisticated behaviour. The JavaScript snippet is <code class="docutils literal notranslate"><span class="pre">eval</span></code>’d and processed in a context where the control
it is part of is provided as local variable <code class="docutils literal notranslate"><span class="pre">data</span></code> and the <code class="docutils literal notranslate"><span class="pre">ControlViewModel</span></code> is available as <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">additionalClasses</span></code></p></td>
<td><p>(Optional) Additional classes to apply to the button of a <code class="docutils literal notranslate"><span class="pre">command</span></code>, <code class="docutils literal notranslate"><span class="pre">commands</span></code>, <code class="docutils literal notranslate"><span class="pre">script</span></code> or <code class="docutils literal notranslate"><span class="pre">javascript</span></code>
control, other than the default <code class="docutils literal notranslate"><span class="pre">btn</span></code>. Can be used to visually style the button, e.g. set to <code class="docutils literal notranslate"><span class="pre">btn-danger</span></code> to
turn the button red.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code></p></td>
<td><p>(Optional) A JavaScript snippet returning either <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code> determining whether the control
should be enabled or not. This allows to override the default logic for the enable state
of the control (disabled if printer is offline). The JavaScript snippet is <code class="docutils literal notranslate"><span class="pre">eval</span></code>’d and processed
in a context where the control it is part of is provided as local variable <code class="docutils literal notranslate"><span class="pre">data</span></code> and the
<code class="docutils literal notranslate"><span class="pre">ControlViewModel</span></code> is available as <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">input</span></code></p></td>
<td><p>(Optional) A list of definitions of input parameters for a <code class="docutils literal notranslate"><span class="pre">command</span></code> or <code class="docutils literal notranslate"><span class="pre">commands</span></code>, to be rendered as
additional input fields. <code class="docutils literal notranslate"><span class="pre">command</span></code>/<code class="docutils literal notranslate"><span class="pre">commands</span></code> may contain placeholders to be replaced by the values obtained
from the user for the defined input fields:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Enable Fan</span>
<span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">M106 S%(speed)s</span>
<span class="nt">input</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Speed (0-255)</span>
    <span class="nt">parameter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">speed</span>
    <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">255</span>
    <span class="nt">slider</span><span class="p">:</span>
        <span class="nt">min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
        <span class="nt">max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">255</span>
</pre></div>
</div>
<p>In OctoPrint’s default UI input fields are always rendered left to right (inline).</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input.name</span></code></p></td>
<td><p>Name to display for the input field.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">input.parameter</span></code></p></td>
<td><p>Internal parameter name for the input field, used as a placeholder in <code class="docutils literal notranslate"><span class="pre">command</span></code>/<code class="docutils literal notranslate"><span class="pre">commands</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input.default</span></code></p></td>
<td><p>Default value for the input field.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">input.slider</span></code></p></td>
<td><p>(Optional) If this attribute is included, instead of an input field a slider control will
be rendered. If you don’t want to define any of <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code> or <code class="docutils literal notranslate"><span class="pre">step</span></code>, write <code class="docutils literal notranslate"><span class="pre">slider:</span> <span class="pre">{}</span></code> to render
a slider based on default values.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input.slider.min</span></code></p></td>
<td><p>(Optional) Minimum value of the slider, defaults to 0.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">input.slider.max</span></code></p></td>
<td><p>(Optional) Maximum value of the slider, defaults to 255.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input.slider.step</span></code></p></td>
<td><p>(Optional) Step size per slider “tick”, defaults to 1.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">regex</span></code></p></td>
<td><p>(Optional) A <a class="reference external" href="https://docs.python.org/2/library/re.html#re-syntax" title="(in Python v2.7)"><span class="xref std std-ref">regular expression</span></a> to
match against lines received from the printer to retrieve information from it (e.g. specific output). Together
with <code class="docutils literal notranslate"><span class="pre">template</span></code> this allows rendition of received data from the printer within the UI.</p>
<p><strong>Please also read the note below</strong>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">template</span></code></p></td>
<td><p>(Optional) A template to use for rendering the match of <code class="docutils literal notranslate"><span class="pre">regex</span></code>. May contain placeholders in
<a class="reference external" href="https://docs.python.org/2/library/string.html#formatstrings" title="(in Python v2.7)"><span class="xref std std-ref">Python Format String Syntax</span></a> for either named
groups within the regex (e.g. <code class="docutils literal notranslate"><span class="pre">Temperature:</span> <span class="pre">{temperature}</span></code> for a regex <code class="docutils literal notranslate"><span class="pre">T:\s*(?P&lt;temperature&gt;\d+(\.\d*)</span></code>)
or positional groups within the regex (e.g. <code class="docutils literal notranslate"><span class="pre">Position:</span> <span class="pre">X={0},</span> <span class="pre">Y={1},</span> <span class="pre">Z={2},</span> <span class="pre">E={3}</span></code> for a regex
<code class="docutils literal notranslate"><span class="pre">X:([0-9.]+)</span> <span class="pre">Y:([0-9.]+)</span> <span class="pre">Z:([0-9.]+)</span> <span class="pre">E:([0-9.]+)</span></code>).</p>
<p><strong>Please also read the note below</strong>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">confirm</span></code></p></td>
<td><p>(Optional) A text to display to the user to confirm his button press. Can be used with sensitive custom controls
like changing EEPROM values in order to prevent accidental clicks. The text will be displayed in a confirmation
dialog like in <a class="reference internal" href="#fig-configuration-customcontrols-confirm"><span class="std std-numref">Fig. 2</span></a>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">regex</span></code> and <code class="docutils literal notranslate"><span class="pre">template</span></code> are only supported for controls that are defined through
<code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>. These control properties aren’t supported for controls added only in
the frontend by the <a class="reference internal" href="../plugins/viewmodels.html#sec-plugins-viewmodels-callbacks"><span class="std std-ref">getAdditionalControls</span></a>
view model callback.</p>
</div>
<div class="figure align-center" id="id3">
<span id="fig-configuration-customcontrols-confirm"></span><img alt="An example confirmation dialog" src="../_images/features-custom_controls-confirm.png" />
<p class="caption"><span class="caption-number">Fig. 2 </span><span class="caption-text">An example confirmation dialog</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="examples">
<span id="sec-features-custom-controls-examples"></span><h2><a class="toc-backref" href="#id8">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="parameterized-gcode-script">
<span id="sec-features-custom-controls-examples-gcode-script"></span><h3><a class="toc-backref" href="#id9">Parameterized GCODE Script</a><a class="headerlink" href="#parameterized-gcode-script" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="code-features-custom-controls-example-gcode-script-config-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 1 </span><span class="caption-text">Control definition in ~/.octoprint/config.yaml</span><a class="headerlink" href="#code-features-custom-controls-example-gcode-script-config-yaml" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Dance</span>
<span class="nt">script</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">custom/dance.gco</span>
<span class="nt">input</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Go arounds</span>
  <span class="nt">parameter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">repetitions</span>
  <span class="nt">slider</span><span class="p">:</span>
    <span class="nt">max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
    <span class="nt">min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">step</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="code-features-custom-controls-example-gcode-script-dance-gco">
<div class="code-block-caption"><span class="caption-number">Listing 2 </span><span class="caption-text">~/.octoprint/scripts/gcode/custom/dance.gco</span><a class="headerlink" href="#code-features-custom-controls-example-gcode-script-dance-gco" title="Permalink to this code">¶</a></div>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">center_x</span> <span class="o">=</span> <span class="nv">printer_profile.volume.width</span> <span class="o">/</span> <span class="m">2</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">center_y</span> <span class="o">=</span> <span class="nv">printer_profile.volume.depth</span> <span class="o">/</span> <span class="m">2</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">speed_x</span> <span class="o">=</span> <span class="nv">printer_profile.axes.x.speed</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">speed_y</span> <span class="o">=</span> <span class="nv">printer_profile.axes.y.speed</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">speed_z</span> <span class="o">=</span> <span class="nv">printer_profile.axes.z.speed</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">M117 run </span><span class="cp">{{</span> <span class="nv">script.name</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">G4 P500</span>
<span class="x">G1 Z10</span>
<span class="x">G1 X</span><span class="cp">{{</span> <span class="nv">center_x</span> <span class="cp">}}</span><span class="x"> Y</span><span class="cp">{{</span> <span class="nv">center_y</span> <span class="cp">}}</span><span class="x"> F</span><span class="cp">{{</span> <span class="nv">speed_x</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">M117 let&#39;s dance!</span>
<span class="x">G91</span>
<span class="x">G1 X-1 Y-1 F</span><span class="cp">{{</span> <span class="nv">speed_x</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">n</span> <span class="k">in</span> <span class="nv">range</span><span class="o">(</span><span class="nv">parameters.repetitions</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">M117 and </span><span class="cp">{{</span> <span class="nv">n</span> <span class="o">+</span> <span class="m">1</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">n</span> <span class="o">%</span> <span class="m">2</span> <span class="o">==</span> <span class="m">0</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    G1 Z1 F</span><span class="cp">{{</span> <span class="nv">speed_z</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    G1 Z-2 F</span><span class="cp">{{</span> <span class="nv">speed_z</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    G1 Z1 F</span><span class="cp">{{</span> <span class="nv">speed_z</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  G1 X2 F</span><span class="cp">{{</span> <span class="nv">speed_x</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">  G1 Y2 F</span><span class="cp">{{</span> <span class="nv">speed_y</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">  G1 X-2 F</span><span class="cp">{{</span> <span class="nv">speed_x</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">  G1 Y-2 F</span><span class="cp">{{</span> <span class="nv">speed_y</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">G90</span>
<span class="x">G1 X</span><span class="cp">{{</span> <span class="nv">center_x</span> <span class="cp">}}</span><span class="x"> Y</span><span class="cp">{{</span> <span class="nv">center_y</span> <span class="cp">}}</span><span class="x"> F</span><span class="cp">{{</span> <span class="nv">speed_x</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">G28 X0 Y0</span>
</pre></div>
</div>
</div>
<p>Note the usage of the <code class="docutils literal notranslate"><span class="pre">parameters.repetitions</span></code> template variable in the GCODE script template, which will contain
the value selected by the user for the “Go arounds” slider.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="f1"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>For Linux that will be <code class="docutils literal notranslate"><span class="pre">~/.octoprint/config.yaml</span></code>, for Windows it will be <code class="docutils literal notranslate"><span class="pre">%APPDATA%/OctoPrint/config.yaml</span></code> and for
Mac <code class="docutils literal notranslate"><span class="pre">~/Library/Application</span> <span class="pre">Support/OctoPrint/config.yaml</span></code></p>
</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gcode_scripts.html" class="btn btn-neutral float-right" title="GCODE Scripts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="accesscontrol.html" class="btn btn-neutral float-left" title="Access Control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2013-2020, Gina Häußge

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 1.5.0rc1
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="https://docs.octoprint.org/en/1.3.12/features/custom_controls.html">1.3.12</a></dd>
      <dd><a href="https://docs.octoprint.org/en/1.4.2/features/custom_controls.html">1.4.2</a></dd>
      <dd><a href="https://docs.octoprint.org/en/1.5.0rc1/features/custom_controls.html">1.5.0rc1</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="https://docs.octoprint.org/en/master/features/custom_controls.html">master</a></dd>
      <dd><a href="https://docs.octoprint.org/en/maintenance/features/custom_controls.html">maintenance</a></dd>
      <dd><a href="https://docs.octoprint.org/en/devel/features/custom_controls.html">devel</a></dd>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>